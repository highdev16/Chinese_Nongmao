(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67aad9ec"],{"0005":function(t,o,e){"use strict";var i=e("4547"),a=e.n(i);a.a},"067a":function(t,o,e){"use strict";var i=e("94e0f"),a=e.n(i);a.a},"17d8":function(t,o,e){},3800:function(t,o,e){"use strict";var i=e("17d8"),a=e.n(i);a.a},4547:function(t,o,e){},6848:function(t,o,e){"use strict";var i=e("8c99"),a=e.n(i);a.a},"73f3":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"promotion-settings"},[t.extendList.length<1?e("div",{staticClass:"no-data"},[t._v("\n        "+t._s(t.$L("暂无数据"))+"\n    ")]):e("div",{staticClass:"settings-box"},[e("vue-scroll",{staticStyle:{bottom:"60px"}},[e("div",{staticClass:"select-tpl",on:{click:t.doSelectTpl}},[t._v("\n                "+t._s(t.$L("选择海报"))+"\n                "),e("div",{staticClass:"icon"},[e("span",{staticClass:"el-icon-arrow-right"})])]),e("div",{staticClass:"tpl-box"},[e("div",{ref:"showBox",staticClass:"tpl-img"},[e("share-img",{attrs:{promotion:t.promotion}})],1)])]),e("div",{staticClass:"settings-bottom"},[e("el-button",{staticClass:"button",on:{click:t.downImg}},[t._v(t._s(t.$L("下载海报")))]),e("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.doEditTpl}},[t._v(t._s(t.$L("编辑海报")))])],1)],1)])},a=[],s=e("a3bd"),l=e.n(s),n=e("07e8"),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"select-tpl"},[e("vue-scroll",[t.data.hasOwnProperty("extendList")?e("div",{staticClass:"tpl-list"},t._l(t.data.extendList,(function(o){return e("div",{staticClass:"tpl-item",on:{click:function(e){return t.selectTpl(o.id)}}},[t.data.hasOwnProperty("promotion")?e("div",{staticClass:"selected",class:{active:o.id===t.data.promotion.id}},[e("span",{staticClass:"el-icon-check"})]):t._e(),e("diy-image",{staticClass:"item-img",attrs:{src:o.img,fit:"contain"}})],1)})),0):t._e()])],1)},c=[],p=e("2e07"),m={name:"selectTpl",components:{DiyImage:p["a"]},props:{data:{type:Object,default:function(){return{extendList:[],promotion:{}}}}},methods:{selectTpl:function(t){this.$emit("closeDialog"),"function"===typeof this.data.changeFunc&&this.data.changeFunc(t)}}},u=m,d=(e("3800"),e("4023")),v=Object(d["a"])(u,r,c,!1,null,"96cdcde4",null),x=v.exports,b=function(){var t=this,o=t.$createElement,e=t._self._c||o;return t.promotion?e("div",{staticClass:"edit-tpl"},[e("vue-scroll",[e("div",{staticClass:"info-main"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[t._v(t._s(t.$L("默认头像")))]),e("div",{staticClass:"item-box"},[e("el-select",{staticClass:"input-item",attrs:{size:"small"},model:{value:t.promotion.headType,callback:function(o){t.$set(t.promotion,"headType",o)},expression:"promotion.headType"}},[e("el-option",{attrs:{value:"1",label:t.$L("使用会员头像")}}),e("el-option",{attrs:{value:"2",label:t.$L("使用分销商店铺LOGO")}}),e("el-option",{attrs:{value:"0",label:t.$L("不使用头像")}})],1)],1)]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("页面背景")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isShowBg,callback:function(o){t.$set(t.promotion,"isShowBg",o)},expression:"promotion.isShowBg"}})],1),e("div",{staticClass:"item-box"},[e("diy-image",{staticClass:"bg-img",attrs:{src:t.promotion.bgImage,"error-text":t.$L("点击上传")}}),e("div",{staticClass:"bg-settings"},[e("label",[e("el-button",{staticClass:"settings-item",attrs:{size:"small"}},[t._v(t._s(t.$L("上传图片")))]),e("input",{staticClass:"file-input",attrs:{type:"file",name:"CommentsPic",placeholder:t.$L("上传图片"),multiple:"",accept:"image/png,image/jpeg,image/jpg"},on:{change:t.upImgFunc}})],1),e("el-button",{staticClass:"settings-item",attrs:{size:"small"},on:{click:t.defaultImg}},[t._v(t._s(t.$L("默认背景")))]),e("el-color-picker",{staticClass:"settings-item",attrs:{size:"small"},model:{value:t.promotion.bgColor,callback:function(o){t.$set(t.promotion,"bgColor",o)},expression:"promotion.bgColor"}})],1),e("div",{staticClass:"tips"},[t._v(t._s(t.$L("建议尺寸:375x560px，小于2M，PNG、JPG格式")))])],1)]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("大标题")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isTitle,callback:function(o){t.$set(t.promotion,"isTitle",o)},expression:"promotion.isTitle"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"input-item",attrs:{size:"small"},model:{value:t.promotion.extTitle,callback:function(o){t.$set(t.promotion,"extTitle",o)},expression:"promotion.extTitle"}}),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTSize,callback:function(o){t.$set(t.promotion,"extTSize",o)},expression:"promotion.extTSize"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTFont,callback:function(o){t.$set(t.promotion,"extTFont",o)},expression:"promotion.extTFont"}},t._l(t.optionsFam,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-color-picker",{staticClass:"color",attrs:{size:"small"},model:{value:t.promotion.extTColor,callback:function(o){t.$set(t.promotion,"extTColor",o)},expression:"promotion.extTColor"}})],1)]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("副标题")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isSubTitle,callback:function(o){t.$set(t.promotion,"isSubTitle",o)},expression:"promotion.isSubTitle"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"input-item",attrs:{size:"small"},model:{value:t.promotion.extSubTitle,callback:function(o){t.$set(t.promotion,"extSubTitle",o)},expression:"promotion.extSubTitle"}}),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extSubTSize,callback:function(o){t.$set(t.promotion,"extSubTSize",o)},expression:"promotion.extSubTSize"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extSubTFont,callback:function(o){t.$set(t.promotion,"extSubTFont",o)},expression:"promotion.extSubTFont"}},t._l(t.optionsFam,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-color-picker",{staticClass:"color",attrs:{size:"small"},model:{value:t.promotion.extSubTColor,callback:function(o){t.$set(t.promotion,"extSubTColor",o)},expression:"promotion.extSubTColor"}})],1)]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("提示文本1")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isTip1,callback:function(o){t.$set(t.promotion,"isTip1",o)},expression:"promotion.isTip1"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"input-item",attrs:{size:"small"},model:{value:t.promotion.extTip1,callback:function(o){t.$set(t.promotion,"extTip1",o)},expression:"promotion.extTip1"}}),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTSize1,callback:function(o){t.$set(t.promotion,"extTSize1",o)},expression:"promotion.extTSize1"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTFont1,callback:function(o){t.$set(t.promotion,"extTFont1",o)},expression:"promotion.extTFont1"}},t._l(t.optionsFam,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-color-picker",{staticClass:"color",attrs:{size:"small"},model:{value:t.promotion.extTColor1,callback:function(o){t.$set(t.promotion,"extTColor1",o)},expression:"promotion.extTColor1"}})],1)]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("提示文本2")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isTip2,callback:function(o){t.$set(t.promotion,"isTip2",o)},expression:"promotion.isTip2"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"input-item",attrs:{size:"small"},model:{value:t.promotion.extTip2,callback:function(o){t.$set(t.promotion,"extTip2",o)},expression:"promotion.extTip2"}}),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTSize2,callback:function(o){t.$set(t.promotion,"extTSize2",o)},expression:"promotion.extTSize2"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-select",{staticClass:"mini-input",attrs:{size:"small"},model:{value:t.promotion.extTFont2,callback:function(o){t.$set(t.promotion,"extTFont2",o)},expression:"promotion.extTFont2"}},t._l(t.optionsFam,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("el-color-picker",{staticClass:"color",attrs:{size:"small"},model:{value:t.promotion.extTColor2,callback:function(o){t.$set(t.promotion,"extTColor2",o)},expression:"promotion.extTColor2"}})],1)]),3==t.promotion.pid?e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("优势标题")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isAdvTitle,callback:function(o){t.$set(t.promotion,"isAdvTitle",o)},expression:"promotion.isAdvTitle"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{staticClass:"input-item",staticStyle:{width:"calc(100% - 42px)"},attrs:{size:"small"},model:{value:t.promotion.advTitle,callback:function(o){t.$set(t.promotion,"advTitle",o)},expression:"promotion.advTitle"}}),e("el-color-picker",{staticStyle:{top:"0",position:"absolute",right:"0"},attrs:{size:"small"},model:{value:t.promotion.advTColor,callback:function(o){t.$set(t.promotion,"advTColor",o)},expression:"promotion.advTColor"}})],1)]):t._e(),3==t.promotion.pid?e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("优势说明")))]),e("el-color-picker",{staticClass:"color-set",attrs:{size:"mini"},model:{value:t.promotion.advContentColor,callback:function(o){t.$set(t.promotion,"advContentColor",o)},expression:"promotion.advContentColor"}})],1),e("div",{staticClass:"item-box",staticStyle:{"margin-top":"5px"}},t._l(t.promotion.advContent,(function(o,i){return e("div",{key:i},[e("span",{staticClass:"plant-num"},[t._v(t._s(i+1))]),e("el-input",{staticClass:"plant-txt",attrs:{size:"small"},model:{value:t.promotion.advContent[i],callback:function(o){t.$set(t.promotion.advContent,i,o)},expression:"promotion.advContent[index]"}}),0==i?e("div",{staticClass:"poster-add",on:{click:t.handleAdd}},[e("i",{staticClass:"el-icon-plus i"})]):e("div",{staticClass:"poster-add",on:{click:function(o){return t.handleDel(i)}}},[e("i",{staticClass:"el-icon-minus i"})])],1)})),0)]):t._e(),3==t.promotion.pid?e("div",{staticClass:"info-item"},[e("div",{staticClass:"item-title"},[e("span",{staticClass:"title-txt"},[t._v(t._s(t.$L("描述说明")))]),e("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.promotion.isNoteContent,callback:function(o){t.$set(t.promotion,"isNoteContent",o)},expression:"promotion.isNoteContent"}})],1),e("div",{staticClass:"item-box"},[e("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.promotion.noteContent,callback:function(o){t.$set(t.promotion,"noteContent",o)},expression:"promotion.noteContent"}})],1)]):t._e()]),e("div",{staticClass:"bottom"},[e("el-button",{staticClass:"button",attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v(t._s(t.$L("保存")))])],1)])],1):t._e()},f=[],C={name:"editTpl",components:{DiyImage:p["a"],ShareImg:n["a"]},props:{data:{type:Object,default:function(){return{}}}},computed:{promotion:{get:function(){return this.data.hasOwnProperty("promotion")&&(this.promotionData=this.$clone(this.data.promotion)),this.promotionData},set:function(t){this.promotionData=t}}},data:function(){return{promotionData:null,options:[{value:"12px",label:"12px"},{value:"14px",label:"14px"},{value:"16px",label:"16px"},{value:"18px",label:"18px"},{value:"20px",label:"20px"},{value:"24px",label:"24px"},{value:"28px",label:"28px"},{value:"30px",label:"30px"},{value:"32px",label:"32px"},{value:"34px",label:"34px"},{value:"36px",label:"36px"},{value:"48px",label:"48px"},{value:"60px",label:"60px"},{value:"70px",label:"70px"}],optionsFam:[{value:"微软雅黑",label:"微软雅黑"},{value:"宋体",label:"宋体"},{value:"新宋体",label:"新宋体"},{value:"仿宋_GB2312",label:"仿宋_GB2312"},{value:"楷体_GB2312",label:"楷体_GB2312"},{value:"黑体",label:"黑体"},{value:"Arial",label:"Arial"},{value:"Arial Black",label:"Arial Black"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New"},{value:"Tahoma",label:"Tahoma"},{value:"Verdana",label:"Verdana"}]}},methods:{save:function(){this.$emit("closeDialog"),this.data.hasOwnProperty("saveFunc")&&this.data.saveFunc(this.promotion)},defaultImg:function(){this.promotion.hasOwnProperty("defaultBgImage")&&(this.promotion.bgImage=this.promotion.defaultBgImage)},upImgFunc:function(t){var o=this,e=t.target.files[0];if(e&&o.data.hasOwnProperty("promotion")){var i=Math.floor(e.size/1024),a=e.type.substring(6);if(i>2097152)return o.$message({message:o.$L("请选择2M以内的图片！"),type:"warning"}),!1;if("png"!==a&&"jpeg"!==a&&"jpg"!==a)return o.$message({message:o.$L("请选择png、jpeg、jpg的图片格式！"),type:"warning"}),!1;var s=new FileReader;s.readAsDataURL(e),s.onload=function(t){o.promotion.bgImage=t.target.result}}},handleAdd:function(){this.promotion&&this.promotion.advContent.splice(this.promotion.advContent.length,0,this.$L("优势说明"))},handleDel:function(t){this.promotion&&this.promotion.advContent.splice(t,1)}}},g=C,h=(e("067a"),e("0005"),Object(d["a"])(g,b,f,!1,null,"0bd78566",null)),T=h.exports,$=e("831a"),k={name:"promotionSettings",components:{ShareImg:n["a"]},data:function(){return{loading:!0,extendList:[],promotion:{},newImage:null}},created:function(){this.getData()},methods:{doSelectTpl:function(){var t=this;this.$store.commit("setDialogObj",{name:this.$L("选择海报"),view:x,data:{extendList:this.extendList,promotion:this.promotion,changeFunc:function(o){t.newImage=null,t.getData(o)}}})},doEditTpl:function(){var t=this;this.$store.commit("setDialogObj",{name:this.$L("编辑海报"),view:T,data:{promotion:this.promotion,saveFunc:function(o){t.promotion=o,t.doSave()}}})},getData:function(t){var o=this;o.loading=!0,setTimeout((function(){o.$getApi("distributionShopSeoSetting",{id:t},(function(t){o.extendList=t.extendList,o.promotion=t.promotion,o.changeTemplateUrl((function(){o.loading=!1}))}),(function(e){console.log(e),o.$confirm(o.$L("网络请求失败"),o.$L("出错了"),{confirmButtonText:o.$L("点击重试"),cancelButtonText:o.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){o.getData(t)})).catch((function(t){o.$router.push({name:"home"})}))}))}),300)},changeTemplateUrl:function(t){var o=this,e=4,i=0,a=function(){i++,i===e&&"function"===typeof t&&t()};this.promotion.hasOwnProperty("bgImage")?this.$getBase64(this.promotion.bgImage,(function(t){o.promotion.bgImage=t,a()})):a(),this.promotion.hasOwnProperty("userHead")?(this.promotion.userHead||(this.promotion.userHead=l.a),this.$getBase64(this.promotion.userHead,(function(t){o.promotion.userHead=t,a()}))):a(),this.promotion.hasOwnProperty("shopHead")?this.$getBase64(this.promotion.shopHead,(function(t){o.promotion.shopHead=t,a()})):a(),this.promotion.hasOwnProperty("qrCode")?this.$getBase64(this.promotion.qrCode,(function(t){o.promotion.qrCode=t,a()})):a()},downImg:function(){var t=this;this.loading=!0,null===this.newImage?setTimeout((function(){t.$makeImg(t.$refs.showBox,{backgroundColor:null}).then((function(o){t.newImage=o.toDataURL(),t.$store.commit("setDialogObj",{name:t.$L("长按图片可保存"),view:$["a"],data:{img:t.newImage}}),t.loading=!1}))}),500):(this.$store.commit("setDialogObj",{name:this.$L("长按图片可保存"),view:$["a"],data:{img:this.newImage}}),this.loading=!1)},doSave:function(){var t=this;this.loading=!0,setTimeout((function(){t.$makeImg(t.$refs.showBox,{backgroundColor:null}).then((function(o){t.newImage=t.promotion.extendImg=o.toDataURL(),t.updateData()}))}),1e3)},updateData:function(){var t=this;t.loading=!0,setTimeout((function(){t.$getApi("shopSeoSettingSave",{promotion:t.promotion},(function(o){t.extendList=o.extendList,t.promotion=o.promotion,t.changeTemplateUrl((function(){t.$message({message:t.$L("操作成功"),type:"success"}),t.loading=!1}))}),(function(o){console.log(o),t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.updateData()})).catch((function(o){t.$router.push({name:"home"})}))}))}),300)}}},_=k,L=(e("6848"),Object(d["a"])(_,i,a,!1,null,"edce53a8",null));o["default"]=L.exports},"8c99":function(t,o,e){},"94e0f":function(t,o,e){}}]);
//# sourceMappingURL=chunk-67aad9ec.6cbeabdb.js.map