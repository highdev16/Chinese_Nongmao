(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3738d31b"],{"0bb2":function(t,e,s){"use strict";var r=s("a7bd"),a=s.n(r);a.a},"78b6":function(t,e,s){"use strict";var r=s("c96e"),a=s.n(r);a.a},"8db5":function(t,e,s){t.exports=s.p+"img/addpt.2ab3bc20.jpg"},a7bd:function(t,e,s){},b511:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"issue-information"},[r("el-form",{ref:"addressForm",staticClass:"form-box",attrs:{size:"small",model:t.addressForm}},[r("div",{staticClass:"item"},[r("div",{staticClass:"tit"},[t._v("\n                "+t._s(t.$L("标题"))+"：\n            ")]),r("el-form-item",{staticClass:"form-item"},[r("el-input",{attrs:{type:"text",size:"small",placeholder:t.$L(" 最多可添加100个字符"),maxlength:"100"},model:{value:t.addressForm.title,callback:function(e){t.$set(t.addressForm,"title",e)},expression:"addressForm.title"}})],1)],1),r("div",{staticClass:"item"},[r("div",{staticClass:"tit time"},[r("span",[t._v(" "+t._s(t.$L("显示时间"))+"：")])]),r("el-form-item",{staticClass:"form-item"},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:t.$L("选择日期")},on:{change:t.SearchTimeFunc},model:{value:t.addressForm.dtCreate,callback:function(e){t.$set(t.addressForm,"dtCreate",e)},expression:"addressForm.dtCreate"}}),r("p",{staticClass:"font-grey tips"},[t._v(t._s(t.$L("显示给他人看的发布时间，默认为当前时间")))])],1)],1),r("div",{staticClass:"item item-two"},[r("div",{staticClass:"tit"},[t._v("\n                "+t._s(t.$L("描述"))+"：\n            ")]),r("el-form-item",{staticClass:"form-item"},[r("el-input",{attrs:{type:"textarea",maxlength:"500",resize:"none",placeholder:t.$L(" 最多可以添加500个字符，可留空！"),rows:"4"},model:{value:t.addressForm.summary,callback:function(e){t.$set(t.addressForm,"summary",e)},expression:"addressForm.summary"}})],1),r("el-form-item",{staticClass:"img-item"},["http://bbx11.nicebox.test"===t.addressForm.img||""===t.addressForm.img?r("img",{staticClass:"up-show",attrs:{src:s("8db5"),border:"0",align:"absmiddle"}}):r("img",{staticClass:"up-show",attrs:{src:t.addressForm.img,border:"0",align:"absmiddle"}}),r("input",{staticClass:"img-input",attrs:{id:"fileinp",type:"file",name:"CommentsPic",placeholder:t.$L("上传图片"),accept:"image/png,image/jpeg,image/jpg"},on:{change:t.upImgFunc}})])],1),r("div",{staticClass:"item item-two"},[r("div",{staticClass:"tit"},[t._v("\n                "+t._s(t.$L("内容"))+"：\n            ")]),r("el-form-item",{staticClass:"form-item",staticStyle:{"text-align":"center"}},[r("quill-editor",{staticClass:"editor",attrs:{maxlength:"50000",options:t.editorOption},model:{value:t.addressForm.content,callback:function(e){t.$set(t.addressForm,"content",e)},expression:"addressForm.content"}})],1)],1)]),r("div",{staticClass:"botton-btn"},[r("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.saveInfoFun}},[t._v(t._s(t.$L("发布信息")))])],1)],1)},a=[],i={name:"issueInformation",data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,id:0,megInfo:{},editorOption:{},uploadImg:[],addressForm:{title:"",img:"",dtCreate:"",summary:"",content:""},showImgUrl:"",addressRules:{title:[{required:!0,message:"请输入正确的标题"}]}}},created:function(){if(this.addressForm.dtCreate=this.formatDateTime(new Date),this.$route.params.hasOwnProperty("id")){var t=this.$route.params.id;t=parseInt(t),isNaN(t)&&(t=0),this.id=t}this.id>0?this.getData():this.loading=!1},methods:{showError:function(t,e,s){this.errorType="warning"===s?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=e&&""!==e?e:null,this.loading=!1,this.errorShow=!0},getData:function(t){var e=this;e.id>0&&(e.loading=!0,e.$api("readContentReleaseNews",{id:e.id},(function(t){1===t.flag?(e.megInfo=t.data,e.addressForm.title=e.megInfo.title,e.addressForm.dtCreate=e.megInfo.dtCreate,e.addressForm.summary=e.megInfo.summary,e.addressForm.content=e.megInfo.content,e.addressForm.img=e.megInfo.pic,e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"information"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"information"})}))})))},formatDateTime:function(t){var e=t.getFullYear(),s=t.getMonth()+1;s=s<10?"0"+s:s;var r=t.getDate();r=r<10?"0"+r:r;var a=t.getHours();a=a<10?"0"+a:a;var i=t.getMinutes();i=i<10?"0"+i:i;var n=t.getSeconds();return n=n<10?"0"+n:n,e+"-"+s+"-"+r+" "+a+":"+i+":"+n},upImgFunc:function(t){var e=this,s=t.target.files[0],r=Math.floor(s.size/1024),a=s.type.substring(6);if(r>2097152)return e.$Message.info("请选择2M以内的图片！"),!1;if("png"!==a&&"jpeg"!==a&&"jpg"!==a)return e.$Message.info("请选择png、jpeg、jpg的图片格式！"),!1;e.uploadImg={file:s};var i=new FileReader;i.readAsDataURL(s),i.onload=function(t){e.addressForm.img=t.target.result}},SearchTimeFunc:function(t){console.log(t),this.addressForm.dtCreate=t},backFunc:function(){this.$router.push({name:"information"})},saveInfoFun:function(){var t=this;if(t.loading=!0,""!==t.addressForm.title){t.addressForm.img=t.uploadImg;var e={id:t.id,title:t.addressForm.title,dtCreate:t.addressForm.dtCreate,summary:t.addressForm.summary,content:t.addressForm.content,smallImg:t.addressForm.img?t.addressForm.img:""},s=t.$objToFormData(e);t.$api("editReleaseNews",s,(function(e){1===e.flag?(t.$message({type:"success",message:t.$L("发布成功!")}),t.$router.push({name:"information"}),t.getData(),t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"information"})}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"information"})}))}),!0)}else t.$message({type:"error",message:t.$L("标题不能为空!")}),t.loading=!1}}},n=i,o=(s("78b6"),s("0bb2"),s("4023")),m=Object(o["a"])(n,r,a,!1,null,"d25b104a",null);e["default"]=m.exports},c96e:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3738d31b.6b950269.js.map