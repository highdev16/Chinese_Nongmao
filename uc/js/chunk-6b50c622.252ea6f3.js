(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b50c622"],{"0d52":function(e,t,r){"use strict";var a=r("ea1f"),n=r.n(a);n.a},"4e2a":function(e,t,r){"use strict";var a=r("c2be"),n=r.n(a);n.a},"86bb":function(e,t,r){"use strict";var a=r("a4c9"),n=r.n(a);n.a},a4c9:function(e,t,r){},bd18:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-cascader",{staticClass:"region",attrs:{props:e.config,separator:e.separator,placeholder:e.placeholder,size:e.size},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}})},n=[],s=(r("cc57"),{name:"regionView",props:{size:{type:String,default:"small"},separator:{type:String,default:" - "},value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},model:{prop:"value",event:"change"},computed:{regions:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},data:function(){var e=this;return{config:{lazy:!0,lazyLoad:function(t,r){var a=0;t&&(a=t.value),e.getRegion(a,(function(t){var a=[];for(var n in t)t[n]&&a.push({value:t[n].id,label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t[n].name:t[n].name_en});r(a)}),(function(e){console.log(e),r([])}))}}}},methods:{getRegion:function(e,t,r){var a=this;a.$api("getRegion",{pid:e},(function(e){1===e.flag?"function"===typeof t&&t(e.data):"function"===typeof r&&r(e)}),(function(e){"function"===typeof r&&r(e)}))}}}),o=s,i=(r("4e2a"),r("4023")),d=Object(i["a"])(o,a,n,!1,null,null,null);t["a"]=d.exports},c2be:function(e,t,r){},e152:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-address"},[r("el-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressForm,rules:e.addressRules,"show-message":!1,size:"small","label-width":"110px","label-position":"left"}},[r("el-form-item",{attrs:{label:e.$L("收货人"),prop:"name"}},[r("el-input",{attrs:{placeholder:e.$L("姓名")},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),r("el-form-item",{attrs:{label:e.$L("手机号"),prop:"mobile"}},[r("el-input",{attrs:{placeholder:e.$L("手机号码")},model:{value:e.addressForm.mobile,callback:function(t){e.$set(e.addressForm,"mobile",t)},expression:"addressForm.mobile"}})],1),r("el-form-item",{attrs:{label:e.$L("所在地区"),prop:"Continent"}},[r("el-select",{attrs:{placeholder:e.$L("请选择")},on:{change:e.continentFunc},model:{value:e.addressForm.Continent,callback:function(t){e.$set(e.addressForm,"Continent",t)},expression:"addressForm.Continent"}},e._l(e.Continent,(function(t){return r("el-option",{key:t.id,attrs:{label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t.name:t.name_en,value:t.id}})})),1)],1),e.countryData?r("el-form-item",{attrs:{label:e.addressForm.addName,prop:"country"}},[r("el-select",{attrs:{placeholder:e.$L("请选择")},on:{change:e.countryFunc},model:{value:e.addressForm.country,callback:function(t){e.$set(e.addressForm,"country",t)},expression:"addressForm.country"}},e._l(e.Country,(function(t){return r("el-option",{key:t.id,attrs:{label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t.name:t.name_en,value:t.id}})})),1)],1):e._e(),e.provinceData?r("el-form-item",{attrs:{label:e.addressForm.addName,prop:"Province"}},[r("el-select",{attrs:{placeholder:e.$L("请选择")},on:{change:e.provinceFunc},model:{value:e.addressForm.Province,callback:function(t){e.$set(e.addressForm,"Province",t)},expression:"addressForm.Province"}},e._l(e.Province,(function(t){return r("el-option",{key:t.id,attrs:{label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t.name:t.name_en,value:t.id}})})),1)],1):e._e(),e.cityData?r("el-form-item",{attrs:{label:e.addressForm.addName,prop:"city"}},[r("el-select",{attrs:{placeholder:e.$L("请选择")},on:{change:e.cityFunc},model:{value:e.addressForm.city,callback:function(t){e.$set(e.addressForm,"city",t)},expression:"addressForm.city"}},e._l(e.City,(function(t){return r("el-option",{key:t.id,attrs:{label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t.name:t.name_en,value:t.id}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:e.$L("详细地址"),prop:"address"}},[r("el-input",{attrs:{placeholder:e.$L("输入道路、楼栋层或房间号等信息")},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),r("el-form-item",{attrs:{label:e.$L("邮政编码"),prop:"recCode"}},[r("el-input",{attrs:{placeholder:e.$L("请输入邮政编码")},model:{value:e.addressForm.recCode,callback:function(t){e.$set(e.addressForm,"recCode",t)},expression:"addressForm.recCode"}})],1),r("el-form-item",{attrs:{label:e.$L("设为默认")}},[r("el-switch",{attrs:{width:e.switchWidth},model:{value:e.addressForm.defaultAddress,callback:function(t){e.$set(e.addressForm,"defaultAddress",t)},expression:"addressForm.defaultAddress"}})],1),r("div",{staticClass:"bottom-btns"},[r("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$L("保存")))])],1)],1)],1)},n=[],s=(r("cc57"),r("bd18")),o={name:"addAddress",components:{RegionView:s["a"]},data:function(){var e=this;return{loading:!0,switchWidth:50,defaultCity:"",addressForm:{name:"",mobile:"",address:"",defaultAddress:!0,regions:[],Continent:"0",country:"0",Province:"0",city:"0",addName:"",recCode:""},addressRules:{name:[{required:!0,message:this.$L("请输入收货人姓名")}],mobile:[{required:!0,validator:function(t,r,a){if(r=parseInt(r),isNaN(r))a(new Error(e.$L("请选输入正确的手机号码或固定电话")));else{var n=/^((1[3456789]\d{9})|(\d{6,16}))$/;if(!n.test(r))return a(new Error(e.$L("手机号码或固定电话有误")));a()}}}],address:[{required:!0,message:this.$L("请输入详细地址")}],Continent:[{required:!0}],country:[{required:!1}],Province:[{required:!1}],city:[{required:!1}]},countryData:!1,provinceData:!1,cityData:!1,Continent:[],Country:[],Province:[],City:[]}},created:function(){this.$route.params.id?this.getData():this.loading=!1,this.queryFunc()},methods:{save:function(){var e=this;if(""!=this.addressForm.name)if(""!=this.addressForm.mobile){var t=parseInt(this.addressForm.mobile);if(isNaN(t))this.$message({message:this.$L("请选输入正确的手机号码或固定电话!"),type:"error"});else{var r=/^((1[3456789]\d{9})|(\d{6,16}))$/;if(r.test(t))if(""!=this.addressForm.address)if(""!=this.addressForm.Continent)if(""!=this.addressForm.country)if(""!=this.addressForm.recCode){var a=parseInt(this.addressForm.recCode);isNaN(a)?this.$message({message:this.$L("请输入正确的邮政编码"),type:"error"}):this.$refs.addressForm.validate((function(t){if(!t)return!1;var r=e,a=[];r.addressForm.Continent&&0!=r.addressForm.Continent&&!isNaN(r.addressForm.Continent)&&a.push(r.addressForm.Continent),r.addressForm.country&&0!=r.addressForm.country&&!isNaN(r.addressForm.country)&&a.push(r.addressForm.country),r.addressForm.Province&&0!=r.addressForm.Province&&!isNaN(r.addressForm.Province)&&a.push(r.addressForm.Province),r.addressForm.city&&0!=r.addressForm.city&&!isNaN(r.addressForm.city)&&a.push(r.addressForm.city),a.length>0&&(r.addressForm.regions=a);var n={idRec:r.$route.params.id,recName:r.addressForm.name,regions:r.addressForm.regions,recAddress:r.addressForm.address,recMobile:r.addressForm.mobile,recCode:r.addressForm.recCode,isDefault:1==r.addressForm.defaultAddress?1:0,lang:""};r.$api("editAddress",n,(function(e){1===e.flag?(r.$router.push({name:"addressList"}),r.loading=!1):-1===e.flag?r.$confirm(r.$L("请重新登录"),r.$L("登录超时"),{confirmButtonText:r.$L("重新登录"),cancelButtonText:r.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.$router.push({name:"login",query:{redirect:r.$route.fullPath}})})).catch((function(e){r.$gotoWebHome()})):r.$confirm(r.$L("数据加载失败"),r.$L("出错了"),{confirmButtonText:r.$L("点击重试"),cancelButtonText:r.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.getData()})).catch((function(e){r.$router.push({name:"addressList"})}))}),(function(e){r.$confirm(r.$L("网络请求失败"),r.$L("出错了"),{confirmButtonText:r.$L("点击重试"),cancelButtonText:r.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.getData()})).catch((function(e){r.$router.push({name:"addressList"})}))}))}))}else this.$message({message:this.$L("邮政编码不能为空!"),type:"error"});else this.$message({message:this.$L("所在国家不能为空!"),type:"error"});else this.$message({message:this.$L("所在地区不能为空!"),type:"error"});else this.$message({message:this.$L("详细地址不能为空!"),type:"error"});else this.$message({message:this.$L("手机号码或固定电话有误!"),type:"error"})}}else this.$message({message:this.$L("手机号不能为空!"),type:"error"});else this.$message({message:this.$L("收货人姓名不能为空!"),type:"error"})},getData:function(){var e=this;e.loading=!0,""!==e.$route.params.id?e.$api("getAddressInfo",{idRec:e.$route.params.id},(function(t){1===t.flag?(e.addressForm.name=t.data.name,e.addressForm.mobile=t.data.mobile,e.addressForm.defaultAddress=1===t.data.isDefault,e.addressForm.address=t.data.address,e.addressForm.recCode=t.data.recCode,e.addressForm.Continent=t.data.regionsName,e.addressForm.regions=t.data.regions?t.data.regions:[1,7,247,3021],e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))})):e.loading=!1},continentFunc:function(e){this.countryData=!0;var t=0;e&&(t=e);var r=this;r.$api("getRegion",{pid:t},(function(e){1===e.flag&&(r.Country=e.data,r.provinceData=!1,r.addressForm.country="",r.cityData=!1)}),(function(e){r.$confirm(r.$L("网络请求失败"),r.$L("出错了"),{confirmButtonText:r.$L("点击重试"),cancelButtonText:r.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.getData()})).catch((function(e){r.$router.push({name:"addressList"})}))}))},countryFunc:function(e){var t=0;e&&(t=e);var r=this;r.$api("getRegion",{pid:t},(function(e){1===e.flag&&(r.Province=e.data,r.provinceData=r.Province.length>1,r.addressForm.Province="",r.cityData=!1)}),(function(e){r.$confirm(r.$L("网络请求失败"),r.$L("出错了"),{confirmButtonText:r.$L("点击重试"),cancelButtonText:r.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.getData()})).catch((function(e){r.$router.push({name:"addressList"})}))}))},provinceFunc:function(e){var t=0;e&&(t=e);var r=this;r.$api("getRegion",{pid:t},(function(e){1===e.flag&&(r.City=e.data,r.cityData=r.City.length>1,r.addressForm.city="")}),(function(e){r.$confirm(r.$L("网络请求失败"),r.$L("出错了"),{confirmButtonText:r.$L("点击重试"),cancelButtonText:r.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){r.getData()})).catch((function(e){r.$router.push({name:"addressList"})}))}))},cityFunc:function(e){},queryFunc:function(e){var t=this;t.$api("getRegion",{},(function(e){1===e.flag&&(t.Continent=e.data,t.$route.params.id||(t.addressForm.Continent=""))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"addressList"})}))}))}}},i=o,d=(r("86bb"),r("0d52"),r("4023")),c=Object(d["a"])(i,a,n,!1,null,"01388a94",null);t["default"]=c.exports},ea1f:function(e,t,r){}}]);
//# sourceMappingURL=chunk-6b50c622.252ea6f3.js.map