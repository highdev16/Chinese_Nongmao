(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e1af324"],{2211:function(e,t,a){"use strict";var s=a("9551"),r=a.n(s);r.a},"3ff0":function(e,t,a){"use strict";var s=a("d836"),r=a.n(s);r.a},"43d3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-address"},[a("el-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressForm,rules:e.addressRules,size:"mini","label-width":"100px","label-position":"left"}},["lang_0"==e.$lang()?a("el-form-item",{attrs:{label:e.$L("智能地址识别")}},[a("el-input",{attrs:{size:"mini",type:"textarea",placeholder:"例如：宝小哥，13200000000，广东省珠海市香洲区某某街道某某大厦001号，519000"},model:{value:e.addressMsg,callback:function(t){e.addressMsg=t},expression:"addressMsg"}}),a("div",{staticClass:"el-form-item-tip"},[a("p",{staticClass:"el-form-item-tip-txt"},[e._v(e._s(e.$L("粘贴整段地址，请用逗号或空格分隔，"))),a("br"),e._v(e._s(e.$L("自动识别姓名、电话和地址")))]),a("p",{staticClass:"el-form-item-tip-btn"},[a("el-button",{staticClass:"button",on:{click:e.getMsg}},[e._v("\n\t            \t\t\t"+e._s(e.$L("智能识别"))+"\n\t            \t\t")])],1)])],1):e._e(),a("el-form-item",{attrs:{label:e.$L("收货人"),prop:"name"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),a("el-form-item",{attrs:{label:e.$L("手机号码"),prop:"mobile"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.mobile,callback:function(t){e.$set(e.addressForm,"mobile",t)},expression:"addressForm.mobile"}})],1),a("el-form-item",{staticClass:"address",attrs:{label:e.$L("所在地区"),prop:"regions"}},[a("region-view",{ref:"regions",staticStyle:{width:"310px"},attrs:{size:"mini",placeholder:e.defaultCity},model:{value:e.addressForm.regions,callback:function(t){e.$set(e.addressForm,"regions",t)},expression:"addressForm.regions"}})],1),a("el-form-item",{attrs:{label:e.$L("详细地址"),prop:"address"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),a("el-form-item",{attrs:{label:e.$L("邮政编码"),prop:"recCode"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.recCode,callback:function(t){e.$set(e.addressForm,"recCode",t)},expression:"addressForm.recCode"}})],1),a("el-form-item",{attrs:{label:e.$L("设为默认")}},[a("el-switch",{attrs:{size:"mini",width:e.switchWidth},model:{value:e.addressForm.defaultAddress,callback:function(t){e.$set(e.addressForm,"defaultAddress",t)},expression:"addressForm.defaultAddress"}})],1),a("el-form-item",{staticClass:"bottom-btns"},[a("el-button",{staticClass:"button",attrs:{type:"default"},on:{click:e.close}},[e._v(e._s(e.$L("取消")))]),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$L("保存")))])],1)],1)],1)},r=[],n=(a("cc57"),a("4f54")),o=a("bd18"),i={name:"addAddress",inject:["reload"],components:{RegionView:o["a"]},data:function(){var e=this;return{loading:!0,switchWidth:50,defaultCity:"",addressForm:{name:"",mobile:"",address:"",defaultAddress:!0,regions:[],recCode:""},addressRules:{name:[{required:!0,message:this.$L("请输入收货人姓名")}],mobile:[{required:!0,validator:function(t,a,s){if(a=parseInt(a),isNaN(a))s(new Error(e.$L("请输入正确的手机号码或固定电话")));else{var r=/^((1[3456789]\d{9})|(\d{6,16}))$/;if(!r.test(a))return s(new Error(e.$L("手机号码或固定电话有误")));s()}}}],address:[{required:!0,message:this.$L("请输入详细地址")}],regions:[{required:!0,message:this.$L("请选择所在地区"),validator:function(t,a,s){"object"!==Object(n["a"])(a)||a.length<1?s(new Error(e.$L("请选择所在地区"))):s()}}]},addressMsg:""}},props:{data:{type:Object,default:function(){return{}}}},created:function(){this.getData()},methods:{getMsg:function(){var e=this;""!=this.addressMsg&&e.$getApi("getAddressByStr",{address:this.addressMsg},(function(t){var a=[t.name,t.mobile,t.address,t.regions,t.recCode,t.regionsName];e.addressForm.name=a[0],e.addressForm.mobile=a[1],e.addressForm.address=a[2],e.addressForm.regions=a[3],e.addressForm.recCode=a[4],e.defaultCity=a[5]}),(function(t){console.info(e.$L("识别有误，请检查填写格式是否正确。"))}))},save:function(){var e=this;this.$refs.addressForm.validate((function(t){if(!t)return!1;e.close();var a=e,s={idRec:a.data.id,recName:a.addressForm.name,regions:a.addressForm.regions,recAddress:a.addressForm.address,recMobile:a.addressForm.mobile,recCode:a.addressForm.recCode,isDefault:1==a.addressForm.defaultAddress?1:0,lang:""};a.$api("editAddress",s,(function(e){1===e.flag?(a.reload(),a.loading=!1):-1===e.flag?a.$confirm(a.$L("请重新登录"),a.$L("登录超时"),{confirmButtonText:a.$L("重新登录"),cancelButtonText:a.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.$router.push({name:"login",query:{redirect:a.$route.fullPath}})})).catch((function(e){a.$gotoWebHome()})):a.$confirm(a.$L("数据加载失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.getData()})).catch((function(e){a.$router.push({name:"addressList"})}))}),(function(e){a.$confirm(a.$L("网络请求失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.getData()})).catch((function(e){a.$router.push({name:"addressList"})}))}))}))},close:function(){this.$emit("closeDialog")},getData:function(){var e=this;e.loading=!0,e.data&&e.data.hasOwnProperty("id")?e.$api("getAddressInfo",{idRec:e.data.id},(function(t){1===t.flag?(e.addressForm.name=t.data.name,e.addressForm.mobile=t.data.mobile,e.addressForm.defaultAddress=1===t.data.isDefault,e.addressForm.address=t.data.address,e.addressForm.recCode=t.data.recCode,e.defaultCity=t.data.regionsName,e.addressForm.regions=[1,7,247,3021],e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))})):e.loading=!1}}},d=i,c=(a("2211"),a("4023")),l=Object(c["a"])(d,s,r,!1,null,"6f9e6593",null);t["a"]=l.exports},4530:function(e,t,a){"use strict";var s=a("d057"),r=a.n(s);r.a},"4e2a":function(e,t,a){"use strict";var s=a("c2be"),r=a.n(s);r.a},"67c5":function(e,t,a){"use strict";var s=a("8ab1"),r=a.n(s);r.a},"8ab1":function(e,t,a){},9551:function(e,t,a){},ba69:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"address"},[a("tab-box",{attrs:{"top-menu":e.topMenu}})],1)},r=[],n=a("43d3"),o=a("ce7e"),i={name:"addressView",components:{tabBox:o["a"],addAddress:n["a"]},data:function(){return{tableData:{allNum:0}}},computed:{topMenu:{get:function(){var e={},t=[];return this.tableData&&this.tableData.hasOwnProperty("allNum")?t.push(this.tableData.allNum):t.push(0),t.push(this.allAddressNum),e.text={val:this.$L("已有{$1}个收货地址，最多创建20个",[this.tableData.allNum]),langVal:t,border:!0},e.buttonList=[{text:this.$L("添加收货地址"),func:this.addAddressFunc}],e}}},methods:{addAddressFunc:function(){var e=this;e.tableData.allNum<20?e.$store.commit("setDialogObj",{name:this.$L("添加收货地址"),view:n["a"],width:"600px"}):e.$message({type:"error",message:e.$L("最多可添加20条地址信息!")})},getData:function(){var e=this;e.loading=!0,e.$api("getAddressList",{},(function(t){1===t.flag?(e.tableData=t.data,e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))}},created:function(){this.getData()}},d=i,c=(a("4530"),a("4023")),l=Object(c["a"])(d,s,r,!1,null,"31e96f7a",null);t["default"]=l.exports},bd18:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{staticClass:"region",attrs:{props:e.config,separator:e.separator,placeholder:e.placeholder,size:e.size},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}})},r=[],n=(a("cc57"),{name:"regionView",props:{size:{type:String,default:"small"},separator:{type:String,default:" - "},value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},model:{prop:"value",event:"change"},computed:{regions:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},data:function(){var e=this;return{config:{lazy:!0,lazyLoad:function(t,a){var s=0;t&&(s=t.value),e.getRegion(s,(function(t){var s=[];for(var r in t)t[r]&&s.push({value:t[r].id,label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t[r].name:t[r].name_en});a(s)}),(function(e){console.log(e),a([])}))}}}},methods:{getRegion:function(e,t,a){var s=this;s.$api("getRegion",{pid:e},(function(e){1===e.flag?"function"===typeof t&&t(e.data):"function"===typeof a&&a(e)}),(function(e){"function"===typeof a&&a(e)}))}}}),o=n,i=(a("4e2a"),a("4023")),d=Object(i["a"])(o,s,r,!1,null,null,null);t["a"]=d.exports},c2be:function(e,t,a){},ce7e:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab-box"},[a("tab-head",{attrs:{"top-menu":e.topMenu}}),a("div",{staticClass:"tab-body"},[a("vue-scroll",[a("router-view",{staticClass:"tab-content"})],1)],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab-head"},[e.topMenu&&e.topMenu.hasOwnProperty("menuList")?a("div",{staticClass:"left"},e._l(e.topMenu.menuList,(function(t){return t.hasOwnProperty("hide")&&!1!==t.hide&&e.$route.name!==t.router?e._e():a("div",{staticClass:"tab-item",class:{"mainFontColor current mainBorderColor":e.checkActive(t)},on:{click:function(a){return e.gotoRouter(t)}}},[e._v(e._s(t.text)+"\n        ")])})),0):e._e(),e.topMenu&&e.topMenu.hasOwnProperty("text")&&e.topMenu.text.hasOwnProperty("val")?a("div",{staticClass:"left-txt mainBorderColor",class:{border:e.topMenu.text.hasOwnProperty("border")&&e.topMenu.text.border}},[e._v(e._s(e.topMenu.text.val)+"\n    ")]):e._e(),e.topMenu&&e.topMenu.hasOwnProperty("buttonList")?a("div",{staticClass:"right"},e._l(e.topMenu.buttonList,(function(t,s){return e.$route.name!==t.router?a("el-button",{key:s,staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:function(a){return e.gotoRouter(t)}}},[e._v(e._s(t.text)+"\n        ")]):e._e()})),1):e._e()])},o=[],i=(a("cc57"),{name:"tabHead",props:{topMenu:{type:Object,default:function(){return{}}}},methods:{checkActive:function(e){return!!(!e.hasOwnProperty("router")||this.$route.name===e.router||e.hasOwnProperty("checkRouter")&&this.$in_array(this.$route.name,e.checkRouter))&&!(e.hasOwnProperty("params")&&!this.$compareObj(e.params,this.$route.params))},gotoRouter:function(e){if(e&&e.hasOwnProperty("router")){var t={};e.hasOwnProperty("params")&&Object.assign(t,e.params),e.hasOwnProperty("paramsData")&&Object.assign(t,e.paramsData),this.$router.push({name:e.router,params:t})}else if(e&&"function"===typeof e.func)e.hasOwnProperty("funcData")?e.func(e.funcData):e.func();else if(e&&e.hasOwnProperty("params")||e&&e.hasOwnProperty("paramsData")){var a={};e.hasOwnProperty("params")&&Object.assign(a,e.params),e.hasOwnProperty("paramsData")&&Object.assign(a,e.paramsData),this.$router.push({params:a})}}}}),d=i,c=(a("3ff0"),a("4023")),l=Object(c["a"])(d,n,o,!1,null,"40ad1504",null),u=l.exports,m={name:"tabBox",components:{tabHead:u},props:{topMenu:{type:Object,default:function(){return{}}}}},f=m,p=(a("67c5"),Object(c["a"])(f,s,r,!1,null,"74a12d80",null));t["a"]=p.exports},d057:function(e,t,a){},d836:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4e1af324.5ce1868c.js.map