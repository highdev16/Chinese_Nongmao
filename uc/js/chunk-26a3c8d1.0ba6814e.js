(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26a3c8d1"],{"0dd0":function(t,e,n){"use strict";var a=n("64ba"),i=n.n(a);i.a},"5e17":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"information-list"},[n("div",{staticClass:"search",class:{active:t.searchType}},[n("div",{staticClass:"search-box"},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$L("输入标题"),size:"small",clearable:""},on:{change:t.searchFunc},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("div",{staticClass:"bbx-font bbx-icon-close mainFontColor",on:{click:function(e){return t.showSearch(!1)}}})]),n("div",{staticClass:"search-status"},[n("el-button",{attrs:{size:"small"},on:{click:t.showTimeFunc}},[t._v(t._s(t.$L("时间筛选")))]),n("el-select",{attrs:{size:"small"},on:{change:t.changeTypeFunc},model:{value:t.messageType,callback:function(e){t.messageType=e},expression:"messageType"}},t._l(t.messageTypelist,(function(t){return n("el-option",{key:t.type,attrs:{label:t.label,value:t.type}})})),1)],1),n("div",{staticClass:"content"},[t.tableData&&t.tableData.hasOwnProperty("list")?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-box"},[n("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData.list,"show-header":!1,size:"small"},on:{"selection-change":t.handleSelectionChange}},[t.editSelect?n("el-table-column",{attrs:{type:"selection",width:"25"}}):t._e(),n("el-table-column",{attrs:{align:"left","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"item",on:{click:function(n){return t.getInfoFunc(e.row.id)}}},[""!==e.row.img?n("div",{staticClass:"left"},[n("img",{staticClass:"img",attrs:{src:e.row.img}})]):t._e(),n("div",{staticClass:"right"},[t._v("\n                                "+t._s(e.row.title)),n("br"),t._v("\n                                "+t._s(e.row.time)),n("br"),n("i",{staticClass:"el-icon-view icon"}),t._v(t._s(e.row.clickNum)+"\n                            ")])])}}],null,!1,3813471480)}),n("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"item"},[n("p",{class:t.statusFunc(e.row.status).color},[t._v(t._s(t.statusFunc(e.row.status).text))]),n("i",{staticClass:"el-icon-edit-outline mainFontColor icon",on:{click:function(n){return t.addMsgFunc(e.row.id)}}})])}}],null,!1,2381061430)}),n("el-table-column",{attrs:{width:"20"}})],1),t.tableData.allNum>t.pageSize?n("div",{staticClass:"page"},[n("el-pagination",{attrs:{small:"",background:"",layout:"prev, pager, next",total:t.tableData.allNum},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1):t._e(),t.editSelect?n("div",{staticClass:"botton-btn"},[n("div",{staticClass:"left"},[n("el-checkbox",{on:{change:function(e){return t.handleCheckAllChange(t.tableData.list)}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v(t._s(t.$L("全选")))])],1),n("el-button",{staticClass:"delete",attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){return t.delMsgFunc()}}},[t._v(t._s(t.$L("删除")))])],1):n("div",{staticClass:"botton-btn"},[n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.addMsgFunc()}}},[t._v(t._s(t.$L("发布信息")))])],1)]),n("transition",{attrs:{name:"fade"}},[t.showTime?n("div",{staticClass:"time"},[n("div",{staticClass:"close",on:{click:t.closeTimeFunc}}),n("div",{staticClass:"date"},[n("calendar"),n("inlineCalendar",{attrs:{mode:"during",yearName:t.$L("年"),monthNames:[t.$L("一月"),t.$L("二月"),t.$L("三月"),t.$L("四月"),t.$L("五月"),t.$L("六月"),t.$L("七月"),t.$L("八月"),t.$L("九月"),t.$L("十月"),t.$L("十一月"),t.$L("十二月")],weekNames:[t.$L(" 周一"),t.$L(" 周二"),t.$L(" 周三"),t.$L(" 周四"),t.$L(" 周五"),t.$L(" 周六"),t.$L(" 周日")],defaultDate:t.defaultDate},on:{change:t.onChange}}),n("div",{staticClass:"btns"},[n("el-button",{attrs:{size:"small"},on:{click:t.closeTimeFunc}},[t._v(t._s(t.$L("取消")))]),n("el-button",{staticClass:"mainBgColor",attrs:{size:"small",type:"primary"},on:{click:t.gotoTime}},[t._v(t._s(t.$L("确认")))])],1)],1)]):t._e()])],1)},i=[],s=(n("9a33"),n("f548"),n("6d57"),{name:"informationList",data:function(){return{loading:!1,searchType:!1,inputValue:"",messageType:0,messageTypelist:[{type:0,label:this.$L("全部状态")},{type:2,label:this.$L("未审核")},{type:1,label:this.$L("已审核")}],tableData:{},currentPage:1,pageSize:10,editSelect:!1,checkedInfo:[],msgArr:[],disabled:!0,dtCreateStart:"",dtCreateEnd:"",showTime:!1,timeArr:[],defaultDate:[]}},computed:{mobileTopBtn:{get:function(){return this.$store.state.mobileTopBtn},set:function(t){this.$store.commit("setMobileTopBtn",t)}}},beforeRouteUpdate:function(t,e,n){this.setupTopBtn(),this.showSearch(!1),n()},created:function(){this.setupTopBtn(),this.getData()},beforeDestroy:function(){this.mobileTopBtn=null},methods:{setupTopBtn:function(){var t=this;this.mobileTopBtn=[{text:this.$L("编辑"),size:"14px",func:function(){t.edit()}},{icon:"bbx-icon-sousuo",size:"24px",func:function(){t.showSearch(!0)}}]},showSearch:function(t){this.searchType=!!t},edit:function(){this.editSelect=!this.editSelect,this.editSelect?this.mobileTopBtn[0].text=this.$L("取消"):this.mobileTopBtn[0].text=this.$L("编辑")},handleSelectionChange:function(t){t.length>0?this.disabled=!1:this.disabled=!0;var e=[];for(var n in t)e[n]=t[n].id;this.msgArr=e,console.log(t)},getData:function(){var t=this;t.loading=!0;var e={p:t.currentPage,num:t.pageSize,type:t.type,keyword:t.inputValue,dtCreateStart:t.dtCreateStart,dtCreateEnd:t.dtCreateEnd};t.$api("getReleaseList",e,(function(e){1===e.flag?(t.tableData=e.data,t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}))},getInfoFunc:function(t){this.$router.push({name:"informationInfo",params:{id:t}})},handleCurrentChange:function(t){this.currentPage=t,this.getData()},searchFunc:function(t){this.inputValue=t,this.getData()},changeTypeFunc:function(t){this.type=t,this.getData()},statusFunc:function(t){var e;switch(t){case 0:e={text:this.$L("未审核"),color:"font-red"};break;default:e={text:this.$L("已审核"),color:"font-grey"};break}return e},SearchTimeFunc:function(t){console.log(t),null!==t?(this.dtCreateStart=t[0],this.dtCreateEnd=t[1]):(this.dtCreateStart="",this.dtCreateEnd=""),this.getData()},addMsgFunc:function(t){t?this.$router.push({name:"informationEdit",params:{id:t}}):this.$router.push({name:"informationEdit",params:{id:"add"}})},delMsgFunc:function(t){var e=this;if(t||!Array.isArray(this.msgArr)||0!==this.msgArr.length){var n;n=t||this.msgArr;var a={id:n};console.log(a),e.$confirm(e.$L("此操作将永久删除该发布信息, 是否继续?"),e.$L("提示"),{confirmButtonText:e.$L("确定"),cancelButtonText:e.$L("取消"),type:"warning"}).then((function(){e.$api("deleteReleaseNews",a,(function(t){1===t.flag?(e.loading=!1,e.$message({type:"success",message:e.$L("删除成功!")}),e.getData()):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):(console.log(t),e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})})))}),(function(t){console.log(t),e.$confirm(e.$L(t.msg),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))})).catch((function(){}))}else e.$confirm(e.$L("您还没有选中信息，请勾选信息再做此操作"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"warning",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){"cancel"===t?e.$router.push({name:"home"}):(e.loading=!1,e.showError(e.$L("网络请求失败"),e.$L("请刷新页面重试"),"error"))}))},handleCheckAllChange:function(t){var e=this;if(t){t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)})),this.allSelect=!this.allSelect;var n=[];if(this.allSelect){for(var a in t)n[a]=t[a].id;this.msgArr=n,this.disabled=!1}else this.msgArr=n,this.disabled=!0}},showTimeFunc:function(){this.showTime=!this.showTime},onChange:function(t){var e=JSON.stringify(t.map((function(t){return t.format("YYYY-MM-DD")})));e=e.replace(/"|\[|\]/g,""),e=e.split(","),this.defaultDate=e,this.dtCreateStart=e[0],this.dtCreateEnd=e[1]?e[1]+" 23:59:59":""},closeTimeFunc:function(){this.showTime=!1,this.defaultDate=[],this.dtCreateStart="",this.dtCreateEnd="",this.getData()},gotoTime:function(){this.showTime=!1,this.getData()}}}),o=s,c=(n("e54e"),n("0dd0"),n("4023")),l=Object(c["a"])(o,a,i,!1,null,"392f82de",null);e["default"]=l.exports},"64ba":function(t,e,n){},bfe75:function(t,e,n){},e54e:function(t,e,n){"use strict";var a=n("bfe75"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-26a3c8d1.0ba6814e.js.map