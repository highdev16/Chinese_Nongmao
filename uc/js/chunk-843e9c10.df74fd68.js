(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-843e9c10"],{"2abf":function(t,e,n){"use strict";var o=n("c2f73"),i=n.n(o);i.a},"8db5":function(t,e,n){t.exports=n.p+"img/addpt.2ab3bc20.jpg"},a4f68:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"edit-modify"},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-modify"},[o("el-form",{staticClass:"form-item",attrs:{size:"small",model:t.modifyForm,"label-width":"130px","label-position":"left"}},["text"==t.type||"html"==t.type?[o("el-form-item",{attrs:{label:t.$L("模块标题")+"：",prop:"title"}},[t._v("\n                    "+t._s(t.modifyForm.title)+"\n                ")]),o("el-form-item",{attrs:{label:t.$L("模块内容")+"：",prop:"text"}},[o("quill-editor",{staticClass:"editor",attrs:{maxlength:"50000",options:t.editorOption},model:{value:t.modifyForm.text,callback:function(e){t.$set(t.modifyForm,"text",e)},expression:"modifyForm.text"}})],1)]:[o("el-form-item",{attrs:{label:t.$L("模块标题")+"：",prop:"title"}},[t._v("\n                    "+t._s(t.modifyForm.title)+"\n                ")]),o("el-form-item",{attrs:{label:t.$L(" 选择上传")+"：",prop:"img"}},[o("label",{staticClass:"label"},[o("input",{staticClass:"mainBgColor",attrs:{type:"button",id:"btn",value:t.$L("选择文件")}}),o("input",{attrs:{id:"fileinp",type:"file",name:"CommentsPic",placeholder:t.$L("上传图片"),multiple:"",accept:"image/png,image/jpeg,image/jpg"},on:{change:t.upImgFunc}}),o("div",{staticClass:"img-item"},["http://bbx11.nicebox.test"===t.modifyForm.img||""===t.modifyForm.img?o("img",{staticClass:"up-show",attrs:{src:n("8db5"),border:"0",align:"absmiddle"}}):o("img",{staticClass:"up-show",attrs:{src:t.modifyForm.img,border:"0",align:"absmiddle"}})])])]),o("p",[t._v(t._s(t.$L("注：上传图片的大小不要超过4M，上传图片的格式应为：.jpg、.png、.gif.")))])]],2)],1),o("div",{staticClass:"bottom"},[o("el-button",{on:{click:t.backFunc}},[t._v(t._s(t.$L("取消返回")))]),o("el-button",{on:{click:t.defaultFunc}},[t._v(t._s(t.$L("恢复默认")))]),o("el-button",{attrs:{type:"primary"},on:{click:t.saveingFunc}},[t._v(t._s(t.$L("保存设置")))])],1)])},i=[],a={name:"editModify",data:function(){return{loading:!0,editorOption:{},type:0,blockName:"",langId:"",pageId:"commHeader",modifyForm:{title:"",text:"",img:""},routerData:{},uploadImg:[]}},created:function(){this.$route.query.hasOwnProperty("moduleType")&&(this.type=this.$route.query.moduleType),this.$route.query.hasOwnProperty("idBlock")&&(this.idBlock=this.$route.query.idBlock),this.$route.query.hasOwnProperty("blockName")&&(this.blockName=this.$route.query.blockName),this.$route.query.hasOwnProperty("langId")&&(this.langId=this.$route.query.langId),this.$route.query.hasOwnProperty("pageId")&&(this.pageId=this.$route.query.pageId),this.getData()},methods:{getData:function(){var t=this;t.loading=!0;var e={langId:t.langId,pageId:t.pageId,blockName:t.blockName};t.$route.query.hasOwnProperty("idBlock")&&(e.idBlock=this.idBlock),t.$api("editBlockContent",e,(function(e){1===e.flag?(t.routerData=e.data,t.routerData.hasOwnProperty("text")&&(t.modifyForm.title=t.routerData.text.title,t.modifyForm.text=t.routerData.text.text),t.routerData.hasOwnProperty("image")&&(t.modifyForm.title=t.routerData.image.title,t.modifyForm.img=t.routerData.image.file),t.loading=!1):2===e.flag?t.$confirm(t.$L("参数缺失"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.backFunc()})):11===e.flag?t.$confirm(t.$L("模块不存在"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.backFunc()})):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.backFunc()}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}))},upImgFunc:function(t){var e=this,n=t.target.files[0],o=Math.floor(n.size/1024),i=n.type.substring(6);if(o>4194304)return e.$Message.info("请选择4M以内的图片！"),!1;if("png"!==i&&"jpeg"!==i&&"jpg"!==i)return e.$Message.info("请选择png、jpeg、jpg的图片格式！"),!1;e.uploadImg={file:n};var a=new FileReader;a.readAsDataURL(n),a.onload=function(t){e.modifyForm.img=t.target.result}},backFunc:function(){this.$router.push({name:"distributorModify"})},defaultFunc:function(){var t=this;t.routerData.hasOwnProperty("text")&&(t.modifyForm.text=t.routerData.text.text),t.routerData.hasOwnProperty("image")&&(t.modifyForm.img=t.routerData.image.file)},saveingFunc:function(){var t=this,e=this;e.loading=!0,setTimeout((function(){var n={langId:e.langId,pageId:e.pageId,blockName:e.blockName};e.routerData.hasOwnProperty("text")&&(n.blockText=e.modifyForm.text),e.routerData.hasOwnProperty("image")&&(e.modifyForm.image=e.uploadImg,n.PicFile=e.modifyForm.image),t.$route.query.hasOwnProperty("idBlock")&&(n.idBlock=e.idBlock);var o=e.$objToFormData(n);e.$api("saveBlockContent",o,(function(t){1===t.flag?(e.$message({message:e.$L("保存成功！"),type:"success"}),setTimeout((function(){e.loading=!1,"function"===typeof func&&func()}),500),e.backFunc()):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):2===t.flag?e.$confirm(e.$L("参数缺失"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()})):10===t.flag?e.$confirm(e.$L("保存失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()})):11===t.flag?e.$confirm(e.$L("模块不存在"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()})):13===t.flag?e.$confirm(e.$L("上传图片失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()})):14===t.flag?e.$confirm(e.$L("图片大小不要超过4M"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.backFunc()}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.saveingFunc()})).catch((function(t){e.$router.push({name:"home"})}))}),!0)}),300)}}},r=a,c=(n("2abf"),n("4023")),u=Object(c["a"])(r,o,i,!1,null,"36834679",null);e["default"]=u.exports},c2f73:function(t,e,n){}}]);
//# sourceMappingURL=chunk-843e9c10.df74fd68.js.map