(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba878506"],{"3b97":function(t,e,a){"use strict";var n=a("f78a"),i=a.n(n);i.a},5932:function(t,e,a){},"728e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exchange-record"},[a("div",{staticClass:"search",class:{active:t.searchType}},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$L("请输入搜索订单"),size:"small",clearable:""},on:{change:t.searchFunc},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("div",{staticClass:"bbx-font bbx-icon-close mainFontColor",on:{click:function(e){return t.showSearch(!1)}}})]),a("div",{staticClass:"search-status"},[a("el-button",{staticClass:"time-search",attrs:{size:"small"},on:{click:t.showTimeFunc}},[t._v(t._s(t.$L("时间筛选")))]),a("el-select",{attrs:{size:"small"},on:{change:t.changeTypeFunc},model:{value:t.messageType,callback:function(e){t.messageType=e},expression:"messageType"}},t._l(t.messageTypelist,(function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})})),1)],1),t.tableData&&t.tableData.hasOwnProperty("list")&&t.tableData.list.length>0?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"exchange-list"},[t._l(t.tableData.list,(function(e,n){return a("div",{key:n,staticClass:"list-wrapper"},[a("img",{staticClass:"exchange-img",attrs:{src:e.img,alt:""}}),a("div",{staticClass:"exchange-detail"},[a("p",{staticClass:"tip"},[t._v(t._s(e.name))]),a("p",{staticClass:"tip"},[t._v(t._s(e.typeName))]),a("p",{staticClass:"tip"},[t._v(t._s(e.createTime))])]),a("div",{staticClass:"exchange-ponits mainFontColor"},[t._v(t._s(e.points)+t._s(t.$L("积分")))])])})),null!==t.tableData.list&&t.tableData.allNum>t.pageSize?a("div",{staticClass:"list-pages"},[a("el-pagination",{attrs:{small:"",background:"","page-size":t.pageSize,layout:"prev, pager, next",total:t.tableData.allNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],2):a("div",{staticClass:"tips"},[t._v("\n        "+t._s(t.$L("暂无数据"))+"\n    ")]),a("transition",{attrs:{name:"fade"}},[t.showTime?a("div",{staticClass:"time"},[a("div",{staticClass:"close",on:{click:t.closeTimeFunc}}),a("div",{staticClass:"date"},[a("calendar"),a("inlineCalendar",{attrs:{mode:"during",yearName:t.$L("年"),monthNames:[t.$L("一月"),t.$L("二月"),t.$L("三月"),t.$L("四月"),t.$L("五月"),t.$L("六月"),t.$L("七月"),t.$L("八月"),t.$L("九月"),t.$L("十月"),t.$L("十一月"),t.$L("十二月")],weekNames:[t.$L(" 周一"),t.$L(" 周二"),t.$L(" 周三"),t.$L(" 周四"),t.$L(" 周五"),t.$L(" 周六"),t.$L(" 周日")],defaultDate:t.defaultDate},on:{change:t.onChange}}),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small"},on:{click:t.closeTimeFunc}},[t._v(t._s(t.$L("取消")))]),a("el-button",{staticClass:"mainBgColor",attrs:{size:"small",type:"primary"},on:{click:t.gotoTime}},[t._v(t._s(t.$L("确认")))])],1)],1)]):t._e()])],1)},i=[],s=(a("9a33"),a("f548"),{name:"exchangeRecord",data:function(){return{loading:!1,searchType:!1,inputValue:"",SearchTimeZone:"",messageType:"all",pageSize:10,currentPage:1,dtCreateStart:"",dtCreateEnd:"",messageTypelist:[{type:"all",name:this.$L("全部类型")},{type:"prod",name:this.$L("产品")},{type:"gift",name:this.$L("礼品")},{type:"coupon",name:this.$L("优惠券")}],tableData:{},showTime:!1,defaultDate:[]}},computed:{mobileTopBtn:{get:function(){return this.$store.state.mobileTopBtn},set:function(t){this.$store.commit("setMobileTopBtn",t)}}},beforeRouteUpdate:function(t,e,a){this.setupTopBtn(),this.showSearch(!1),a()},created:function(){this.setupTopBtn(),this.getData()},beforeDestroy:function(){this.mobileTopBtn=null},methods:{setupTopBtn:function(){var t=this;this.mobileTopBtn=[{icon:"bbx-icon-sousuo",size:"24px",func:function(){t.showSearch(!0)}}]},showSearch:function(t){this.searchType=!!t},showError:function(t,e,a){this.errorType="warning"===a?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=e&&""!==e?e:null,this.loading=!1,this.errorShow=!0},showTimeFunc:function(){this.showTime=!this.showTime},closeTimeFunc:function(){this.showTime=!1,this.defaultDate=[],this.dtCreateStart="",this.dtCreateEnd="",this.getData()},onChange:function(t){var e=JSON.stringify(t.map((function(t){return t.format("YYYY-MM-DD")})));e=e.replace(/"|\[|\]/g,""),e=e.split(","),this.defaultDate=e,this.dtCreateStart=e[0],this.dtCreateEnd=e[1]?e[1]+" 23:59:59":""},gotoTime:function(){this.showTime=!1,this.getData()},getData:function(){var t=this;t.loading=!0;var e={p:t.currentPage,num:t.pageSize,type:t.type,keyword:t.inputValue,dtCreateStart:t.dtCreateStart,dtCreateEnd:t.dtCreateEnd};t.$api("getPointsStoreRecordList",e,(function(e){1===e.flag?(t.tableData=e.data,t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"integralShop"})}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"integralShop"})}))}))},SearchTimeFunc:function(t){null!==t?(this.dtCreateStart=t[0],this.dtCreateEnd=t[1]):(this.dtCreateStart="",this.dtCreateEnd=""),this.getData()},searchFunc:function(t){this.inputValue=t,this.getData()},changeTypeFunc:function(t){this.type=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},stateTypeFunc:function(t){var e;switch(t){case 0:e={text:"产品"};break;case 1:e={text:"礼品"};break;case 2:e={text:"优惠券"};break;default:e={text:"未知报错",color:"red"};break}return e}}}),o=s,r=(a("f5d8"),a("3b97"),a("4023")),c=Object(r["a"])(o,n,i,!1,null,"e60cd188",null);e["default"]=c.exports},f5d8:function(t,e,a){"use strict";var n=a("5932"),i=a.n(n);i.a},f78a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ba878506.ef2a1f1c.js.map