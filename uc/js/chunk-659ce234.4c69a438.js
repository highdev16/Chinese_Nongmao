(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-659ce234"],{"2dfc":function(t,e,n){"use strict";var a=n("84ab"),r=n.n(a);r.a},"37cb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"information"},[n("div",{staticClass:"content-top"},[n("el-button-group",{staticClass:"left"},[n("el-button",{attrs:{type:"default",size:t.btnSize,disabled:t.tableData&&t.tableData.hasOwnProperty("list")&&t.tableData.list.length<=0},on:{click:function(e){return t.delMsgFunc()}}},[t._v(t._s(t.$L("选中删除")))])],1),n("div",{staticClass:"right"},[n("span",[t._v(t._s(t.$L("时间"))+"：")]),n("el-date-picker",{staticClass:"time-search",staticStyle:{width:"230px"},attrs:{type:"daterange",align:"right",size:t.btnSize,"start-placeholder":t.$L("开始日期"),"end-placeholder":t.$L("结束日期"),"value-format":"yyyy-MM-dd"},on:{change:t.SearchTimeFunc},model:{value:t.SearchTimeZone,callback:function(e){t.SearchTimeZone=e},expression:"SearchTimeZone"}}),n("el-select",{staticClass:"search",attrs:{size:t.btnSize},on:{change:t.changeTypeFunc},model:{value:t.messageType,callback:function(e){t.messageType=e},expression:"messageType"}},t._l(t.messageTypelist,(function(t){return n("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})})),1),n("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$L("输入标题"),size:t.btnSize,clearable:""},on:{change:t.searchFunc},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),t.tableData&&t.tableData.hasOwnProperty("list")?n("div",{staticClass:"content"},[n("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData.list,"empty-text":t.$L("暂无数据"),"header-cell-style":{background:"#f0f1f5",color:"#666"}},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:t.$L("标题"),align:"left","max-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"title",on:{click:function(n){return t.getInfoFunc(e.row.id)}}},[""!==e.row.img?n("img",{staticClass:"left",attrs:{src:e.row.img}}):t._e(),n("div",{staticClass:"msg"},[n("p",{staticClass:"title"},[t._v(t._s(e.row.title))])])])}}],null,!1,3975106450)}),n("el-table-column",{attrs:{prop:"time",label:t.$L("时间"),sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"clickNum",label:t.$L("浏览次数"),sortable:"",align:"center",width:"150"}}),n("el-table-column",{attrs:{prop:"status",label:t.$L("状态"),sortable:"",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"status"},[n("span",{class:t.statusFunc(e.row.status).color},[t._v(t._s(t.statusFunc(e.row.status).text))])])}}],null,!1,2370015200)}),n("el-table-column",{attrs:{label:t.$L("管理"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return n("div",{staticClass:"manage-btn"},[n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(n){return t.addMsgFunc(e.row.id)}}},[t._v(t._s(t.$L("修改")))]),n("el-button",{staticClass:"btn",attrs:{type:"default"},on:{click:function(n){return t.delMsgFunc(e.row.id)}}},[t._v(t._s(t.$L("删除")))])],1)}}],null,!1,3411383561)})],1),null!==t.tableData.list&&t.tableData.allNum>0?n("div",{staticClass:"list-pages"},[n("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"prev, pager, next, sizes, jumper",total:t.tableData.allNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1):t._e(),t.showTime?n("div",{staticClass:"time"},[n("calendar",{on:{change:t.onChange}}),n("inlineCalendar")],1):t._e()])},r=[],i={name:"informationList",data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,btnSize:"small",messageType:0,inputValue:"",msgArr:[],messageTypelist:[{type:0,name:this.$L("全部状态")},{type:2,name:this.$L("未审核")},{type:1,name:this.$L("已审核")}],SearchTimeZone:"",currentPage:1,pageSize:10,tableData:{},type:0,dtCreateStart:"",dtCreateEnd:"",showTime:!1}},created:function(){this.getData()},methods:{showError:function(t,e,n){this.errorType="warning"===n?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=e&&""!==e?e:null,this.loading=!1,this.errorShow=!0},getData:function(){var t=this;t.loading=!0;var e={p:t.currentPage,num:t.pageSize,type:t.type,keyword:t.inputValue,dtCreateStart:t.dtCreateStart,dtCreateEnd:t.dtCreateEnd};t.$api("getReleaseList",e,(function(e){1===e.flag?(t.tableData=e.data,t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.loading=!1,t.showError(t.$L("登录超时"),t.$L("请重新登录"),"error")})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){"cancel"===e?t.$router.push({name:"home"}):(t.loading=!1,t.showError(t.$L("网络请求失败"),t.$L("请刷新页面重试"),"error"))}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){"cancel"===e?t.$router.push({name:"home"}):(t.loading=!1,t.showError(t.$L("网络请求失败"),t.$L("请刷新页面重试"),"error"))}))}))},getInfoFunc:function(t){this.$router.push({name:"informationInfo",params:{id:t}})},changeTypeFunc:function(t){this.type=t,this.getData()},searchFunc:function(t){this.inputValue=t,this.getData()},SearchTimeFunc:function(t){null!==t?(this.dtCreateStart=t[0],this.dtCreateEnd=t[1]):(this.dtCreateStart="",this.dtCreateEnd=""),this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleSelectionChange:function(t){var e=[];for(var n in t)e[n]=t[n].id;this.msgArr=e},statusFunc:function(t){var e;switch(t){case 0:e={text:this.$L("未审核"),color:"font-red"};break;default:e={text:this.$L("已审核"),color:"font-grey"};break}return e},delMsgFunc:function(t){var e=this;if(t||!Array.isArray(this.msgArr)||0!==this.msgArr.length){var n;n=t||this.msgArr;var a={id:n};console.log(a),e.$confirm(e.$L("此操作将永久删除该发布信息, 是否继续?"),e.$L("提示"),{confirmButtonText:e.$L("确定"),cancelButtonText:e.$L("取消"),type:"warning"}).then((function(){e.$api("deleteReleaseNews",a,(function(t){1===t.flag?(e.loading=!1,e.$message({type:"success",message:e.$L("删除成功!")}),e.getData()):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):(console.log(t),e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})})))}),(function(t){console.log(t),e.$confirm(e.$L(t.msg),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))})).catch((function(){}))}else e.$confirm(e.$L("您还没有选中发布的信息，请勾选发布的信息再做此操作"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("取消"),type:"warning",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(){}))},addMsgFunc:function(t){t?this.$router.push({name:"informationEdit",params:{id:t}}):this.$router.push({name:"informationAdd"})}}},s=i,o=(n("2dfc"),n("4023")),l=Object(o["a"])(s,a,r,!1,null,"c65f1dd6",null);e["default"]=l.exports},"84ab":function(t,e,n){}}]);
//# sourceMappingURL=chunk-659ce234.4c69a438.js.map