(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dd7c461"],{"0889":function(e,t,a){},"0e35":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"content-top"},[a("div",{staticClass:"left"},[a("user-card",{attrs:{info:e.info,isCreateVip:e.isCreateVip}})],1),1===e.isCreateVip?a("div",{staticClass:"card-info"},[1===e.isHasCard?a("div",{staticClass:"part-left"},[a("p",{staticClass:"tit"},[e._v(e._s(e.$L("我的信息")))]),a("el-form",{staticClass:"info-msg",attrs:{model:e.getcardForm,"label-width":"80px","label-position":"left"}},e._l(e.getcardForm,(function(t,i){return a("el-form-item",{key:i,attrs:{label:t.name}},[a("el-input",{attrs:{size:"small",type:"item.type",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1)})),1)],1):a("div",{staticClass:"part-left"},[1===e.openCard?a("div",[a("p",{staticClass:"tit"},[e._v(e._s(e.$L("我的信息")))]),a("el-form",{staticClass:"info-msg",attrs:{size:"small",model:e.getcardForm,"label-width":"80px","label-position":"left"}},[e._l(e.getcardForm,(function(t,i){return a("el-form-item",{key:i,attrs:{label:e.formListLang(t.name)}},["radio"===t.type?a("el-select",{model:{value:e.info[i],callback:function(t){e.$set(e.info,i,t)},expression:"info[index]"}},e._l(t.value,(function(t,i){return a("el-option",{key:i,attrs:{label:t,value:t}},[e._v(e._s(t))])})),1):"date"===t.type?a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:e.$L("请选择生日日期")},on:{change:e.timeFunc},model:{value:e.info[i],callback:function(t){e.$set(e.info,i,t)},expression:"info[index]"}}):t.name!==e.$L("手机号")?a("el-input",{attrs:{value:"item.user_value",placeholder:e.$L("请输入")+e.formListLang(t.name)},model:{value:e.info[i],callback:function(t){e.$set(e.info,i,t)},expression:"info[index]"}}):a("el-input",{staticClass:"input",attrs:{type:"text",placeholder:e.$L("请输入手机号")},model:{value:e.info[i],callback:function(t){e.$set(e.info,i,t)},expression:"info[index]"}})],1)})),1==e.authCode?a("el-form-item",{staticClass:"code",attrs:{label:e.$L("验证码")}},[a("el-input",{staticClass:"code",style:{width:"100px"},attrs:{type:"text"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"get-code",attrs:{type:"primary"},on:{click:e.getCodeFunc}},[e._v(e._s(e.$L(" 获取验证码")))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"get-code",attrs:{type:"primary"}},[e._v(e._s(e.count))])],1):e._e(),a("el-form-item",{staticClass:"btn-submit"},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.submitFunc}},[e._v(e._s(e.$L("立即激活")))])],1)],2)],1):e._e(),0===e.openCard?a("div",{staticClass:"right-tips mainFontColor"},[a("p",{staticClass:"text"},[e._v(e._s(e.$L("联系商家开启会员卡！")))])]):e._e(),0===e.getCard?a("div",{staticClass:"right-tips mainFontColor"},[a("p",{staticClass:"text"},[e._v(e._s(0==e.priceGap?e.$L("消费即赠送会员卡！"):e.$L("消费满")+e.priceGap+e.$L("赠送会员卡！")))])]):e._e()]),a("div",{staticClass:"part-right"},[a("p",{staticClass:"tit"},[e._v(e._s(e.$L("会员卡详情")))]),a("ul",{staticClass:"preview-text"},[a("li",{staticClass:"item-li"},[a("span",{staticClass:"item-span"},[e._v(e._s(e.$L("享受折扣")))]),a("p",{staticClass:"item-p"},[e._v(e._s(e.privilege.discount)+e._s(e.$L("折")))])]),a("li",{staticClass:"item-li"},[a("span",{staticClass:"item-span"},[e._v(e._s(e.$L("特权说明")))]),a("p",{staticClass:"item-p"},[0!==e.privilege.initBonus?a("i",[e._v(e._s(e.$L("激活成功即赠送"))+e._s(e.privilege.initBonus)+e._s(e.$L("积分"))),a("br")]):e._e(),0!==e.privilege.costMoney?a("i",[e._v("\n                                "+e._s(e.$L("每消费"))+e._s(e.privilege.costMoney)+e._s(e.currencyCode)+"，"+e._s(e.$L("赠送"))+e._s(e.privilege.incBonus)+e._s(e.$L("积分"))),a("br")]):e._e(),0!==e.privilege.maxBonus?a("i",[e._v(e._s(e.$L("单次赠送上限"))+e._s(e.privilege.maxBonus)+e._s(e.$L("积分"))),a("br")]):e._e(),0!==e.privilege.costBonus?a("i",[e._v(e._s(e.$L("每使用"))+e._s(e.privilege.costBonus)+e._s(e.$L("积分"))+"，"+e._s(e.$L("抵扣"))+e._s(e.privilege.reduceMoney)+e._s(e.currencyCode)),a("br")]):e._e(),0!==e.privilege.maxReduceBonus?a("i",[e._v(e._s(e.$L("订单满"))+e._s(e.privilege.leastMoney)+e._s(e.currencyCode)+e._s(e.$L("可用积分抵扣 ，单笔使用上限"))+e._s(e.privilege.maxReduceBonus)+e._s(e.$L("积分"))),a("br")]):e._e(),0!==e.privilege.discount?a("i",[e._v(e._s(e.$L("用卡可享受"))+e._s(e.privilege.discount)+e._s(e.$L("折优惠"))),a("br")]):e._e(),0!==e.privilege.explain?a("i",[e._v(e._s(e.privilege.explain))]):e._e()])]),a("li",{staticClass:"item-li"},[a("span",{staticClass:"item-span"},[e._v(e._s(e.$L("有效日期")))]),1==e.privilege.dateType?a("p",{staticClass:"item-p"},[e._v(e._s(e.$L("永久有效")))]):a("p",{staticClass:"item-p"},[e._v(e._s(e.privilege.beginTime+e.$L("至")+e.privilege.endTime))])]),a("li",{staticClass:"item-li"},[a("span",{staticClass:"item-span"},[e._v(e._s(e.$L("等级规则")))]),a("p",{staticClass:"item-p"},[0!==e.privilege.costPayPoints?a("i",[e._v(e._s(e.$L("每消费"))+e._s(e.privilege.costPayPoints)+e._s(e.currencyCode)+e._s(e.$L("赠送"))+"\n                                "+e._s(e.privilege.increaseRankPoints)+e._s(e.$L("经验值"))),a("br")]):e._e(),0!==e.privilege.maxRankPoints?a("i",[e._v(e._s(e.$L("单笔经验赠送上限为"))+e._s(e.privilege.maxRankPoints)),a("br")]):e._e(),0!==e.privilege.initRankPoints?a("i",[e._v(e._s(e.$L("首次激活卡赠送"))+e._s(e.privilege.initRankPoints)+e._s(e.$L("经验值")))]):e._e()])])])])]):e._e()]),e.info&&e.info.hasOwnProperty("nowEXP")&&e.info.hasOwnProperty("nexEXP")?a("div",{staticClass:"content-middle"},[a("span",{staticClass:"title"},[e._v(e._s(e.$L("经验记录")))]),a("i",{staticClass:"bbx-font bbx-icon-huiyuan1"}),a("span",[e._v(e._s(0==e.isHasCard?" ":e.info.groupName))]),a("el-progress",{attrs:{"show-text":!1,percentage:e.info.nowEXP<=0?0:e.info.nowEXP/Number(e.info.nowEXP+e.info.nexEXP)*100,color:"mainBgColor"}}),a("span",{staticClass:"tips"},[e._v(e._s(e.$L("经验值"))+e._s(e.info.nowEXP)+"\n            "),1===e.info.isAssign?a("i"):a("i",[0===e.info.nexEXP?a("i",[e._v("\n                    "+e._s(e.$L("已达到最高级"))+"\n                ")]):0!==e.info.nexEXP&&0!==e.isHasCard?a("i",[e._v("\n                    ，"+e._s(e.$L("距离下一级还差"))+e._s(e.info.nexEXP)+e._s(e.$L("经验值"))+"\n                ")]):e._e()])])],1):e._e(),a("div",{staticClass:"table-head"},[a("el-button",{staticClass:"left",attrs:{type:"default",size:"small",disabled:e.tableData&&e.tableData.hasOwnProperty("list")&&e.tableData.list.length<=0},on:{click:function(t){return e.delMsgFunc()}}},[e._v(e._s(e.$L("选中删除")))]),a("div",{staticClass:"right"},[e._v("\n            "+e._s(e.$L("时间"))+"：\n            "),a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",align:"right",size:"small","start-placeholder":e.$L("开始日期"),"end-placeholder":e.$L("结束日期"),"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:e.SearchTimeFunc},model:{value:e.SearchTimeZone,callback:function(t){e.SearchTimeZone=t},expression:"SearchTimeZone"}})],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table"},[e.tableData&&e.tableData.hasOwnProperty("list")?a("div",{staticClass:"content"},[a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData.list,"empty-text":e.$L("暂无数据"),"header-cell-style":{background:"#f0f1f5",color:"#666"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:e.$L("经验类型"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"status"},[1==t.row.typeFlag?[e._v("\n                            "+e._s(e.$L("消费"))),a("br")]:2==t.row.typeFlag?[e._v("\n                            "+e._s(e.$L("赠送经验值"))),a("br")]:e._e(),a("span",{staticClass:"font-grey"},[e._v(e._s(e.$L("订单号"))+": "+e._s(t.row.orderSn))])],2)}}],null,!1,3280363495)}),a("el-table-column",{attrs:{prop:"points",label:e.$L("经验值"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"font-green"},[e._v("\n                        "+e._s(t.row.points)+"\n                    ")])}}],null,!1,493574219)}),a("el-table-column",{attrs:{prop:"time",label:e.$L("时间"),align:"center"}}),a("el-table-column",{attrs:{prop:"desc",label:e.$L("描述"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[1==t.row.typeFlag?[e._v("\n                            "+e._s(e.$L(" 消费"))+e._s(t.row.orderAmount)+e._s(e.$L(" 赠送"))+e._s(t.row.points)+e._s(e.$L(" 个经验值"))+"\n                        ")]:3==t.row.typeFlag?[e._v("\n                            "+e._s(e.$L("管理员手动变动会员分组"))+"\n                        ")]:2==t.row.typeFlag?[e._v("\n                            "+e._s(e.$L("初始化增加经验积分"))+e._s(t.row.points)+"\n                        ")]:e._e()],2)}}],null,!1,2931155694)})],1),e.tableData.allNum>0?a("div",{staticClass:"list-pages"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next,jumper",total:e.tableData.allNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1):e._e()])])},n=[],s=a("ee22"),o=a("eb05"),r={name:"card",components:{userCard:o["a"],sectionTitle:s["a"]},inject:["reload"],data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,isCreateVip:0,isHasCard:"",getCard:"",openCard:0,info:{},getcardForm:{},telPhone:"",authCode:0,code:"",disabled:!0,privilege:{},tableData:{},SearchTimeZone:"",dtCreateStart:"",dtCreateEnd:"",pageSize:10,currentPage:1,msgArr:[],phoneNumber:"",phoneCode:"",show:!0,count:"",timer:null,currencyCode:""}},created:function(){this.$isMobile()?this.$router.push({name:"userCardMobile"}):this.getData()},methods:{showError:function(e,t,a){this.errorType="warning"===a?"warning":"error",this.errorTitle=e&&""!==e?e:this.$L("出错了"),this.errorTips=t&&""!==t?t:null,this.loading=!1,this.errorShow=!0},formListLang:function(e){var t;switch(e){case"姓名":t=this.$L(" 姓名");break;case"性别":t=this.$L("性别");break;case"生日":t=this.$L("生日");break;case"邮箱":t=this.$L("邮箱");break;case"详细地址":t=this.$L("详细地址");break;case"学历":t=this.$L("学历");break;case"行业":t=this.$L("行业");break;case"收入":t=this.$L("收入");break;case"爱好":t=this.$L("爱好");break;case"手机号":t=this.$L("手机号");break;default:t=this.$L("未知");break}return t},getData:function(){var e=this;e.loading=!0;var t={type:2,p:e.currentPage,dtCreateStart:e.dtCreateStart,dtCreateEnd:e.dtCreateEnd};e.$api("getcardInfo",t,(function(t){1===t.flag?(e.info=t.data.info,e.privilege=t.data.info.privilege,e.isCreateVip=t.data.isCreateVip,e.isHasCard=t.data.isHasCard,e.getCard=t.data.getCard,e.openCard=t.data.openCard,e.priceGap=t.data.priceGap,e.getcardForm=t.data.form,e.tableData=t.data.experList,e.currencyCode=t.data.currencyCode,e.loading=!1,e.authCode=t.data.code):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))},backFunc:function(){this.$router.push({name:"userCard"})},submitFunc:function(){var e=this,t=[];for(var a in e.getcardForm)t[e.getcardForm[a]["fieldname"]]=void 0!=e.info[a]?e.info[a]:"";if(""!==t.user_form_info_flag_mobile&&void 0!=t.user_form_info_flag_mobile)if(1!=e.authCode||this.code.trim()){var i={type:"active_user",param:t,code:this.code};e.$api("activeCard",i,(function(t){1===t.flag?(e.$message({type:"success",message:e.$L("成功领取会员卡!")}),e.getData(),e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.backFunc()})):e.$confirm(e.$L(t.msg),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){"cancel"===t?e.$router.push({name:"home"}):(e.loading=!1,e.showError(e.$L("网络请求失败"),e.$L("请刷新页面重试"),"error"))}))}),(function(t){e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.backFunc()}))}))}else e.$message({type:"info",message:e.$L("请输入验证码!")});else e.$message({type:"info",message:e.$L("请输入手机号!")})},getCodeFunc:function(){console.log("item",this.info);var e=[];for(var t in this.getcardForm)e[this.getcardForm[t]["fieldname"]]=this.info[t];if(""!==e.user_form_info_flag_mobile&&void 0!=e.user_form_info_flag_mobile||this.$message({type:"info",message:this.$L("请输入手机号!")}),""!==e.user_form_info_flag_mobile){var a=/^1[0-9]{10}$/;if(!a.test(e.user_form_info_flag_mobile))return void this.$message.error(this.$L("手机号码不正确"))}var i=this;i.loading=!0;var n={send_mobile:1,mobile:e.user_form_info_flag_mobile};i.$api("sendCode",n,(function(e){if(1===e.flag){i.tableData=e.data;var t=i.tableData.limitTime;i.timer||(i.count=t,i.show=!1,i.timer=setInterval((function(){i.count>0&&i.count<=t?i.count--:(i.show=!0,clearInterval(i.timer),i.timer=null)}),1e3)),console.log("false:",i.show),i.$message({message:i.$L("新手机验证码发送成功咯！"),type:"success"}),i.loading=!1}else-1===e.flag?i.$confirm(i.$L("请重新登录"),i.$L("登录超时"),{confirmButtonText:i.$L("重新登录"),cancelButtonText:i.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){i.$router.push({name:"login",query:{redirect:i.$route.fullPath}})})).catch((function(e){i.$gotoWebHome(),i.$emit("closeDialog")})):i.$confirm(i.$L(e.msg),i.$L("出错了"),{confirmButtonText:i.$L("点击重试"),cancelButtonText:i.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){i.reload(),i.$emit("closeDialog")})).catch((function(e){"cancel"==e?i.$gotoWebHome():i.reload(),i.$emit("closeDialog")}))}),(function(e){i.$confirm(i.$L(e.msg),i.$L("出错了"),{confirmButtonText:i.$L("点击重试"),cancelButtonText:i.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){i.reload(),i.$emit("closeDialog")})).catch((function(e){i.$gotoWebHome(),i.$emit("closeDialog")}))}))},handleSelectionChange:function(e){var t=[];for(var a in e)t[a]=e[a].id;this.msgArr=t},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSizeChange:function(e){this.pageSize=e},changeTypeFunc:function(e){console.log(e)},delMsgFunc:function(){var e=this;if(Array.isArray(this.msgArr)&&0===this.msgArr.length)e.$confirm(e.$L("您还没有选中经验记录，请勾选后再做此操作"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"warning",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){"cancel"===t?e.$router.push({name:"home"}):(e.loading=!1,e.showError(e.$L("网络请求失败"),e.$L("请刷新页面重试"),"error"))}));else{var t;t=this.msgArr;var a={logIds:t};e.$confirm(e.$L("此操作将永久删除该经验记录, 是否继续?"),e.$L("提示"),{confirmButtonText:e.$L("确定"),cancelButtonText:e.$L("取消"),type:"warning"}).then((function(){e.$api("deleteExperienceList",a,(function(t){1===t.flag?(e.loading=!1,e.$message({type:"success",message:e.$L("删除成功!")}),e.getData()):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):(console.log(t),e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.backFunc()})))}),(function(t){console.log(t),e.$confirm(e.$L(t.msg),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.backFunc()}))}))})).catch((function(){}))}},SearchTimeFunc:function(e){null!==e?(this.dtCreateStart=e[0],this.dtCreateEnd=e[1]):(this.dtCreateStart="",this.dtCreateEnd=""),this.getData()},timeFunc:function(e){console.log(e)}}},l=r,c=(a("2084"),a("4023")),u=Object(c["a"])(l,i,n,!1,null,"679045ba",null);t["default"]=u.exports},2084:function(e,t,a){"use strict";var i=a("0889"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-6dd7c461.e1a35a1a.js.map