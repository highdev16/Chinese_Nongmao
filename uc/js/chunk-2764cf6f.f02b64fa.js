(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2764cf6f"],{"088e":function(e,r,t){},"4e2a":function(e,r,t){"use strict";var a=t("c2be"),o=t.n(a);o.a},"96f9":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"info"},[e.formContent?t("div",{staticClass:"content"},[t("el-form",{ref:"ruleForm",staticClass:"rule-form",attrs:{model:e.ruleForm,"label-position":"left","label-width":"90px"}},[t("el-form-item",{attrs:{label:e.$L("会员头像")+"：",prop:"head"}},[t("div",{staticClass:"item",on:{click:e.selectAvatorFunc}},[t("user-avatars",{staticClass:"img",attrs:{src:e.avator}}),t("span",{staticClass:"jiantou bbx-font bbx-icon-iconfontjiantou2"})],1)]),t("el-form-item",{attrs:{label:e.$L("会员账号")+"：",prop:"user"}},[t("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),e.ruleForm.hasOwnProperty("nickname")&&e.ruleForm.nickname.hasOwnProperty("isset")&&e.ruleForm.nickname.isset>=0?t("el-form-item",{attrs:{label:e.$L("昵称")+"：",prop:"name"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.nickname.val,callback:function(r){e.$set(e.ruleForm.nickname,"val",r)},expression:"ruleForm.nickname.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("email")&&e.ruleForm.email.hasOwnProperty("isset")&&e.ruleForm.email.isset>=0?t("el-form-item",{attrs:{label:e.$L("邮箱")+"：",prop:"email"}},[t("el-input",{attrs:{size:"small",disabled:1==e.ruleForm.validEmail.isset},model:{value:e.ruleForm.email.val,callback:function(r){e.$set(e.ruleForm.email,"val",r)},expression:"ruleForm.email.val"}}),1==e.ruleForm.validEmail.isset?t("span",{staticClass:"font mainFontColor",on:{click:e.modifyEmail}},[e._v(e._s(e.$L("修改")))]):e._e()],1):e._e(),e.ruleForm.hasOwnProperty("mobile")&&e.ruleForm.mobile.hasOwnProperty("isset")&&e.ruleForm.mobile.isset>=0?t("el-form-item",{attrs:{label:e.$L("手机号")+"：",prop:"mobile"}},[t("el-input",{attrs:{size:"small",disabled:1==e.ruleForm.validPhone.isset},model:{value:e.ruleForm.mobile.val,callback:function(r){e.$set(e.ruleForm.mobile,"val",r)},expression:"ruleForm.mobile.val"}}),1==e.ruleForm.validPhone.isset?t("span",{staticClass:"font mainFontColor",on:{click:e.modifyMobile}},[e._v(e._s(e.$L("修改")))]):e._e()],1):e._e(),e.ruleForm.hasOwnProperty("name")&&e.ruleForm.name.hasOwnProperty("isset")&&e.ruleForm.name.isset>=0?t("el-form-item",{attrs:{label:e.$L("姓名")+"：",prop:"name"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.name.val,callback:function(r){e.$set(e.ruleForm.name,"val",r)},expression:"ruleForm.name.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("tel")&&e.ruleForm.tel.hasOwnProperty("isset")&&e.ruleForm.tel.isset>=0?t("el-form-item",{attrs:{label:e.$L("电话")+"：",prop:"tel"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.tel.val,callback:function(r){e.$set(e.ruleForm.tel,"val",r)},expression:"ruleForm.tel.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("regions")&&e.ruleForm.regions.hasOwnProperty("isset")&&e.ruleForm.regions.isset>=0?t("el-form-item",{attrs:{label:e.$L("地址")+"：",prop:"regions"}},[t("region-view",{attrs:{placeholder:e.ruleForm.regions.defaultCity},model:{value:e.ruleForm.regions.val,callback:function(r){e.$set(e.ruleForm.regions,"val",r)},expression:"ruleForm.regions.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("address")&&e.ruleForm.address.hasOwnProperty("isset")&&e.ruleForm.address.isset>=0?t("el-form-item",{attrs:{label:e.$L("详细地址")+"：",prop:"address"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.address.val,callback:function(r){e.$set(e.ruleForm.address,"val",r)},expression:"ruleForm.address.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("pcode")&&e.ruleForm.pcode.hasOwnProperty("isset")&&e.ruleForm.pcode.isset>=0?t("el-form-item",{attrs:{label:e.$L("邮编")+"：",prop:"pcode"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.pcode.val,callback:function(r){e.$set(e.ruleForm.pcode,"val",r)},expression:"ruleForm.pcode.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("org")&&e.ruleForm.org.hasOwnProperty("isset")&&e.ruleForm.org.isset>=0?t("el-form-item",{attrs:{label:e.$L("公司名称")+"：",prop:"org"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.org.val,callback:function(r){e.$set(e.ruleForm.org,"val",r)},expression:"ruleForm.org.val"}})],1):e._e(),e.ruleForm.hasOwnProperty("contactor")&&e.ruleForm.contactor.hasOwnProperty("isset")&&e.ruleForm.contactor.isset>=0?t("el-form-item",{attrs:{label:e.$L("联系人")+"：",prop:"contactor"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.contactor.val,callback:function(r){e.$set(e.ruleForm.contactor,"val",r)},expression:"ruleForm.contactor.val"}})],1):e._e(),e._l(e.ruleForm.getDivName,(function(r,a){return e.ruleForm.hasOwnProperty("getDivName")?t("el-form-item",{key:a,attrs:{label:r.key,prop:"name1"}},[t("el-input",{attrs:{size:"small"},model:{value:r.val,callback:function(t){e.$set(r,"val",t)},expression:"item.val"}})],1):e._e()})),t("div",{staticClass:"bottom-btns"},[t("el-button",{staticClass:"btn",attrs:{size:"large"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v(e._s(e.$L("重置")))]),t("el-button",{staticClass:"btn",attrs:{type:"primary",size:"large"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v(e._s(e.$L("保存")))])],1)],2)],1):e._e(),e.formContent?e._e():t("div",{staticClass:"avator-mobile"},[t("div",{staticClass:"box"},[t("p",{staticClass:"tit"},[e._v(e._s(e.$L("选择头像")))]),t("user-avatars",{staticClass:"my-img",attrs:{src:e.avator}}),t("label",{staticClass:"label"},[t("input",{staticClass:"mainBgColor",attrs:{type:"button",id:"btn",value:e.$L("点我上传")}}),t("input",{attrs:{id:"fileinp",type:"file",name:"CommentsPic",placeholder:e.$L("上传图片"),multiple:"",accept:"image/png,image/jpeg,image/jpg"},on:{change:e.upImgFunc}})]),t("div",{staticClass:"tips"},[e._v(e._s(e.$L("仅支持JPG、GIF、PNG格式，文件小于2M")))])],1),t("div",{staticClass:"box"},[t("p",{staticClass:"tit"},[e._v(e._s(e.$L("系统头像")))]),t("ul",{staticClass:"img-group"},e._l(e.imgUl,(function(r,a){return t("li",{key:a,staticClass:"img-li",on:{click:function(t){return e.selectAvator(r.img)}}},[t("user-avatars",{staticClass:"img",attrs:{src:r.img}})],1)})),0)])])])},o=[],l=t("63ac"),i=t("3a11"),s=t("bd18"),n=t("4440"),m={name:"info",components:{RegionView:s["a"],bindEmail:l["a"],bindPhone:i["a"],userAvatars:n["a"]},inject:["reload"],data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,imageUrl:"",ruleForm:{username:"",name:"",tel:"",email:"",mobile:"",address:"",regions:[]},defaultCity:"",fileList:[],emailValid:!1,mobileValid:!1,imgUl:[],avator:t("dadc"),uploadImg:[],encryptEmail:"",encryptMobile:"",arr:[],localHead:"",formContent:!0}},created:function(){this.getData()},methods:{showError:function(e,r,t){this.errorType="warning"===t?"warning":"error",this.errorTitle=e&&""!==e?e:this.$L("出错了"),this.errorTips=r&&""!==r?r:null,this.loading=!1,this.errorShow=!0},getData:function(){var e=this;e.loading=!0,e.$api("userInfo",{},(function(r){1===r.flag?(e.ruleForm=r.data,e.avator=r.data.head,e.imgUl=r.data.localHeadImg,r.data.hasOwnProperty("email")&&(e.encryptEmail=r.data.email.val),r.data.hasOwnProperty("mobile")&&(e.encryptMobile=r.data.mobile.val),e.loading=!1):-1===r.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(r){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(r){e.$router.push({name:"home"})}))}),(function(r){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(r){e.$router.push({name:"home"})}))}))},upImgFunc:function(e){var r=this,t=e.target.files[0],a=Math.floor(t.size/1024),o=t.type.substring(6);if(a>2097152)return r.$Message.info("请选择2M以内的图片！"),!1;if("png"!==o&&"jpeg"!==o&&"jpg"!==o)return r.$Message.info("请选择png、jpeg、jpg的图片格式！"),!1;r.uploadImg={file:t};var l=new FileReader;l.readAsDataURL(t),l.onload=function(e){r.avator=e.target.result},r.formContent=!0},submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;r.getData()}))},resetForm:function(){console.log(this.avator);var e=this.argVarName();for(var r in this.ruleForm)if(this.in_array_key(r,e)&&1==this.ruleForm[r].isset&&!this.ruleForm[r].val)return void this.$message.error(this.$L(e[r]+"为必填项"));if(this.ruleForm.hasOwnProperty("getDivName"))for(var t in this.ruleForm.getDivName)if(1==this.ruleForm.getDivName[t].isRequired&&!this.ruleForm.getDivName[t].val.trim())return void this.$message.error(this.$L(this.ruleForm.getDivName[t].key+"是必填项"));this.ruleForm.hasOwnProperty("email")&&this.ruleForm.email.val.trim()!=this.encryptEmail&&-1==this.ruleForm.email.val.indexOf("*")&&(this.ruleForm.email.realVal=this.ruleForm.email.val),this.ruleForm.hasOwnProperty("mobile")&&this.ruleForm.mobile.val.trim()!=this.encryptMobile&&-1==this.ruleForm.mobile.val.indexOf("*")&&(this.ruleForm.mobile.realVal=this.ruleForm.mobile.val);var a=this;a.loading=!0;var o={formData:a.ruleForm,headImg:a.uploadImg?a.uploadImg:a.avator,localHead:a.localHead},l=a.$objToFormData(o);a.$api("saveUserInfo",l,(function(e){1===e.flag?(a.$message({type:"success",message:a.$L("保存成功!")}),a.reload(),a.loading=!1):-1===e.flag?a.$confirm(a.$L("请重新登录"),a.$L("登录超时"),{confirmButtonText:a.$L("重新登录"),cancelButtonText:a.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.$router.push({name:"login",query:{redirect:a.$route.fullPath}})})).catch((function(e){})):a.$confirm(a.$L("数据加载失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.resetForm(),a.loading=!1})).catch((function(e){a.loading=!1}))}),(function(e){a.$confirm(a.$L("网络请求失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.resetForm(),a.loading=!1})).catch((function(e){a.loading=!1}))}),!0)},in_array_key:function(e,r){for(var t in r)if(t==e)return!0;return!1},argVarName:function(){var e=[];return e["email"]="邮件",e["nickname"]="昵称",e["mobile"]="手机",e["tel"]="电话",e["address"]="地址",e["name"]="姓名",e["pcode"]="邮政编码",e["org"]="单位",e["contactor"]="联系人",e["regions"]="通用地区",e},modifyEmail:function(){this.$store.commit("setDialogObj",{name:this.$L("安全验证"),view:l["a"],width:"500px",data:{isset:this.ruleForm.hasOwnProperty("validEmail")&&this.ruleForm.validEmail.hasOwnProperty("isset")?parseInt(this.ruleForm.validEmail.isset):0,emailNum:this.ruleForm.email.val,issetMobile:this.ruleForm.hasOwnProperty("validPhone")&&this.ruleForm.validPhone.hasOwnProperty("isset")?parseInt(this.ruleForm.validPhone.isset):0,mobileNum:this.ruleForm.mobile.val,trueMobileNum:this.ruleForm.mobile.realVal}})},modifyMobile:function(){this.$store.commit("setDialogObj",{name:this.$L("安全验证"),view:i["a"],width:"500px",data:{isset:this.ruleForm.hasOwnProperty("validPhone")&&this.ruleForm.validPhone.hasOwnProperty("isset")?parseInt(this.ruleForm.validPhone.isset):0,mobileNum:this.ruleForm.mobile.val,trueMobileNum:this.ruleForm.mobile.realVal}})},selectAvator:function(e){console.log("img:",e),this.avator=e,this.localHead=e,this.uploadImg="",this.formContent=!0},selectAvatorFunc:function(){this.formContent=!1}}},u=m,c=(t("aac2"),t("d292"),t("4023")),p=Object(c["a"])(u,a,o,!1,null,"4e5dc273",null);r["default"]=p.exports},aac2:function(e,r,t){"use strict";var a=t("088e"),o=t.n(a);o.a},b5c4:function(e,r,t){},bd18:function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-cascader",{staticClass:"region",attrs:{props:e.config,separator:e.separator,placeholder:e.placeholder,size:e.size},model:{value:e.regions,callback:function(r){e.regions=r},expression:"regions"}})},o=[],l=(t("cc57"),{name:"regionView",props:{size:{type:String,default:"small"},separator:{type:String,default:" - "},value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},model:{prop:"value",event:"change"},computed:{regions:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},data:function(){var e=this;return{config:{lazy:!0,lazyLoad:function(r,t){var a=0;r&&(a=r.value),e.getRegion(a,(function(r){var a=[];for(var o in r)r[o]&&a.push({value:r[o].id,label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?r[o].name:r[o].name_en});t(a)}),(function(e){console.log(e),t([])}))}}}},methods:{getRegion:function(e,r,t){var a=this;a.$api("getRegion",{pid:e},(function(e){1===e.flag?"function"===typeof r&&r(e.data):"function"===typeof t&&t(e)}),(function(e){"function"===typeof t&&t(e)}))}}}),i=l,s=(t("4e2a"),t("4023")),n=Object(s["a"])(i,a,o,!1,null,null,null);r["a"]=n.exports},c2be:function(e,r,t){},d292:function(e,r,t){"use strict";var a=t("b5c4"),o=t.n(a);o.a},dadc:function(e,r,t){e.exports=t.p+"img/1.44ebfbaf.jpg"}}]);
//# sourceMappingURL=chunk-2764cf6f.f02b64fa.js.map