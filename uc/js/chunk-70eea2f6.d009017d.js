(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70eea2f6"],{2211:function(e,t,n){"use strict";var a=n("9551"),r=n.n(a);r.a},"43d3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-address"},[n("el-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressForm,rules:e.addressRules,size:"mini","label-width":"100px","label-position":"left"}},["lang_0"==e.$lang()?n("el-form-item",{attrs:{label:e.$L("智能地址识别")}},[n("el-input",{attrs:{size:"mini",type:"textarea",placeholder:"例如：宝小哥，13200000000，广东省珠海市香洲区某某街道某某大厦001号，519000"},model:{value:e.addressMsg,callback:function(t){e.addressMsg=t},expression:"addressMsg"}}),n("div",{staticClass:"el-form-item-tip"},[n("p",{staticClass:"el-form-item-tip-txt"},[e._v(e._s(e.$L("粘贴整段地址，请用逗号或空格分隔，"))),n("br"),e._v(e._s(e.$L("自动识别姓名、电话和地址")))]),n("p",{staticClass:"el-form-item-tip-btn"},[n("el-button",{staticClass:"button",on:{click:e.getMsg}},[e._v("\n\t            \t\t\t"+e._s(e.$L("智能识别"))+"\n\t            \t\t")])],1)])],1):e._e(),n("el-form-item",{attrs:{label:e.$L("收货人"),prop:"name"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),n("el-form-item",{attrs:{label:e.$L("手机号码"),prop:"mobile"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.mobile,callback:function(t){e.$set(e.addressForm,"mobile",t)},expression:"addressForm.mobile"}})],1),n("el-form-item",{staticClass:"address",attrs:{label:e.$L("所在地区"),prop:"regions"}},[n("region-view",{ref:"regions",staticStyle:{width:"310px"},attrs:{size:"mini",placeholder:e.defaultCity},model:{value:e.addressForm.regions,callback:function(t){e.$set(e.addressForm,"regions",t)},expression:"addressForm.regions"}})],1),n("el-form-item",{attrs:{label:e.$L("详细地址"),prop:"address"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),n("el-form-item",{attrs:{label:e.$L("邮政编码"),prop:"recCode"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.recCode,callback:function(t){e.$set(e.addressForm,"recCode",t)},expression:"addressForm.recCode"}})],1),n("el-form-item",{attrs:{label:e.$L("设为默认")}},[n("el-switch",{attrs:{size:"mini",width:e.switchWidth},model:{value:e.addressForm.defaultAddress,callback:function(t){e.$set(e.addressForm,"defaultAddress",t)},expression:"addressForm.defaultAddress"}})],1),n("el-form-item",{staticClass:"bottom-btns"},[n("el-button",{staticClass:"button",attrs:{type:"default"},on:{click:e.close}},[e._v(e._s(e.$L("取消")))]),n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$L("保存")))])],1)],1)],1)},r=[],s=(n("cc57"),n("4f54")),o=n("bd18"),i={name:"addAddress",inject:["reload"],components:{RegionView:o["a"]},data:function(){var e=this;return{loading:!0,switchWidth:50,defaultCity:"",addressForm:{name:"",mobile:"",address:"",defaultAddress:!0,regions:[],recCode:""},addressRules:{name:[{required:!0,message:this.$L("请输入收货人姓名")}],mobile:[{required:!0,validator:function(t,n,a){if(n=parseInt(n),isNaN(n))a(new Error(e.$L("请输入正确的手机号码或固定电话")));else{var r=/^((1[3456789]\d{9})|(\d{6,16}))$/;if(!r.test(n))return a(new Error(e.$L("手机号码或固定电话有误")));a()}}}],address:[{required:!0,message:this.$L("请输入详细地址")}],regions:[{required:!0,message:this.$L("请选择所在地区"),validator:function(t,n,a){"object"!==Object(s["a"])(n)||n.length<1?a(new Error(e.$L("请选择所在地区"))):a()}}]},addressMsg:""}},props:{data:{type:Object,default:function(){return{}}}},created:function(){this.getData()},methods:{getMsg:function(){var e=this;""!=this.addressMsg&&e.$getApi("getAddressByStr",{address:this.addressMsg},(function(t){var n=[t.name,t.mobile,t.address,t.regions,t.recCode,t.regionsName];e.addressForm.name=n[0],e.addressForm.mobile=n[1],e.addressForm.address=n[2],e.addressForm.regions=n[3],e.addressForm.recCode=n[4],e.defaultCity=n[5]}),(function(t){console.info(e.$L("识别有误，请检查填写格式是否正确。"))}))},save:function(){var e=this;this.$refs.addressForm.validate((function(t){if(!t)return!1;e.close();var n=e,a={idRec:n.data.id,recName:n.addressForm.name,regions:n.addressForm.regions,recAddress:n.addressForm.address,recMobile:n.addressForm.mobile,recCode:n.addressForm.recCode,isDefault:1==n.addressForm.defaultAddress?1:0,lang:""};n.$api("editAddress",a,(function(e){1===e.flag?(n.reload(),n.loading=!1):-1===e.flag?n.$confirm(n.$L("请重新登录"),n.$L("登录超时"),{confirmButtonText:n.$L("重新登录"),cancelButtonText:n.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){n.$router.push({name:"login",query:{redirect:n.$route.fullPath}})})).catch((function(e){n.$gotoWebHome()})):n.$confirm(n.$L("数据加载失败"),n.$L("出错了"),{confirmButtonText:n.$L("点击重试"),cancelButtonText:n.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){n.getData()})).catch((function(e){n.$router.push({name:"addressList"})}))}),(function(e){n.$confirm(n.$L("网络请求失败"),n.$L("出错了"),{confirmButtonText:n.$L("点击重试"),cancelButtonText:n.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){n.getData()})).catch((function(e){n.$router.push({name:"addressList"})}))}))}))},close:function(){this.$emit("closeDialog")},getData:function(){var e=this;e.loading=!0,e.data&&e.data.hasOwnProperty("id")?e.$api("getAddressInfo",{idRec:e.data.id},(function(t){1===t.flag?(e.addressForm.name=t.data.name,e.addressForm.mobile=t.data.mobile,e.addressForm.defaultAddress=1===t.data.isDefault,e.addressForm.address=t.data.address,e.addressForm.recCode=t.data.recCode,e.defaultCity=t.data.regionsName,e.addressForm.regions=[1,7,247,3021],e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))})):e.loading=!1}}},l=i,d=(n("2211"),n("4023")),c=Object(d["a"])(l,a,r,!1,null,"6f9e6593",null);t["a"]=c.exports},"472a":function(e,t,n){},"4e2a":function(e,t,n){"use strict";var a=n("c2be"),r=n.n(a);r.a},9551:function(e,t,n){},bd18:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-cascader",{staticClass:"region",attrs:{props:e.config,separator:e.separator,placeholder:e.placeholder,size:e.size},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}})},r=[],s=(n("cc57"),{name:"regionView",props:{size:{type:String,default:"small"},separator:{type:String,default:" - "},value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},model:{prop:"value",event:"change"},computed:{regions:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},data:function(){var e=this;return{config:{lazy:!0,lazyLoad:function(t,n){var a=0;t&&(a=t.value),e.getRegion(a,(function(t){var a=[];for(var r in t)t[r]&&a.push({value:t[r].id,label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t[r].name:t[r].name_en});n(a)}),(function(e){console.log(e),n([])}))}}}},methods:{getRegion:function(e,t,n){var a=this;a.$api("getRegion",{pid:e},(function(e){1===e.flag?"function"===typeof t&&t(e.data):"function"===typeof n&&n(e)}),(function(e){"function"===typeof n&&n(e)}))}}}),o=s,i=(n("4e2a"),n("4023")),l=Object(i["a"])(o,a,r,!1,null,null,null);t["a"]=l.exports},c2be:function(e,t,n){},c468:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"address-list"},[n("div",{staticClass:"table-head"},[n("el-button",{staticClass:"left",attrs:{type:"default",size:"small",disabled:e.tableData&&e.tableData.hasOwnProperty("list")&&e.tableData.list.length<=0},on:{click:function(t){return e.delMsgFunc()}}},[e._v(e._s(e.$L("选中删除")))]),n("div",{staticClass:"right"},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:e.$L("输入手机号"),size:"small",clearable:""},on:{change:e.searchFunc},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),n("div",{staticClass:"table"},[e.tableData&&e.tableData.hasOwnProperty("list")?n("div",{staticClass:"content-box"},[n("el-table",{staticClass:"content-box",attrs:{size:"small","empty-text":e.$L("暂无数据"),data:e.tableData.list,"header-cell-style":{background:"#f0f1f5",padding:"10px 0",color:"#666"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:e.$L("收货人"),align:"left","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")])}}],null,!1,2475435290)}),n("el-table-column",{attrs:{label:e.$L("手机号码"),align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n                        "+e._s(t.row.mobile)+"\n                    ")])}}],null,!1,3873020445)}),n("el-table-column",{attrs:{label:e.$L("所在地区"),align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n                        "+e._s(t.row.regionsName)+"\n                    ")])}}],null,!1,3474839441)}),n("el-table-column",{attrs:{label:e.$L("详细地址"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n                        "+e._s(t.row.address)+"\n                    ")])}}],null,!1,1535182059)}),n("el-table-column",{attrs:{label:e.$L("邮政编码"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v("\n                        "+e._s(t.row.recCode)+"\n                    ")])}}],null,!1,1568813508)}),n("el-table-column",{attrs:{label:e.$L("默认地址"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[1===t.row.isDefault?n("el-button",{staticClass:"mainFontColor mainBorderColor"},[e._v(e._s(e.$L("默认地址")))]):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.setDefaultFunc(t.row.id)}}},[e._v(e._s(e.$L("设为默认")))])],1)}}],null,!1,1582008993)}),n("el-table-column",{attrs:{label:e.$L("操作"),align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticClass:"operate"},[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.addAddressFunc(t.row.id)}}},[e._v(e._s(e.$L("修改")))]),n("el-button",{attrs:{type:"default"},on:{click:function(n){return e.delMsgFunc(t.row.id)}}},[e._v(e._s(e.$L("删除")))])],1)}}],null,!1,3141094058)})],1),null!==e.tableData.list&&e.tableData.allNum>0?n("div",{staticClass:"list-pages"},[n("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.tableData.allNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1):e._e()])])},r=[],s=n("43d3"),o={name:"addressList",components:{addAddress:s["a"]},data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,addressNum:6,allAddressNum:20,inputValue:"",tableData:{},pageSize:10,currentPage:1,addressArr:[],addressId:0}},inject:["reload"],created:function(){this.getData()},methods:{showError:function(e,t,n){this.errorType="warning"===n?"warning":"error",this.errorTitle=e&&""!==e?e:this.$L("出错了"),this.errorTips=t&&""!==t?t:null,this.loading=!1,this.errorShow=!0},getData:function(){var e=this;e.loading=!0;var t={p:e.currentPage,num:e.pageSize,keyword:e.inputValue};e.$api("getAddressList",t,(function(t){1===t.flag?(e.tableData=t.data,e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(){e.$router.push({name:"home"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(){e.$router.push({name:"home"})}))}))},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},searchFunc:function(e){this.inputValue=e,this.getData()},handleSelectionChange:function(e){var t=[];for(var n in e)t[n]=e[n].id;this.addressArr=t,console.log(this.addressArr)},delMsgFunc:function(e){var t=this;if(e||!Array.isArray(this.addressArr)||0!==this.addressArr.length){var n;n=e||this.addressArr;var a={idRec:n};t.$confirm(t.$L("此操作将永久删除该地址信息, 是否继续?"),t.$L("提示"),{confirmButtonText:t.$L("确定"),cancelButtonText:t.$L("取消"),type:"warning"}).then((function(){t.$api("deleteAddress",a,(function(e){1===e.flag?(t.loading=!1,t.$message({type:"success",message:t.$L("删除成功!")}),t.getData(),t.reload()):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):(console.log(e),t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})})))}),(function(e){console.log(e),t.$confirm(t.$L(e.msg),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}))})).catch((function(){}))}else t.$confirm(t.$L("您还没有选中地址信息，请勾选地址再做此操作"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("取消"),type:"warning",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(){}))},setDefaultFunc:function(e){var t=this;t.addressId=e,t.loading=!0,null!==e&&t.$api("setDefaultAddress",{idRec:t.addressId},(function(e){1===e.flag?(t.currentPage=1,t.$message({type:"success",message:t.$L("设置默认地址成功!")}),t.getData(),t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}))},addAddressFunc:function(e){var t=this;t.addressId=e,t.$store.commit("setDialogObj",{name:this.$L("添加收货地址"),view:s["a"],width:"600px",data:{id:t.addressId}})}}},i=o,l=(n("e1af"),n("4023")),d=Object(l["a"])(i,a,r,!1,null,"8e7e834c",null);t["default"]=d.exports},e1af:function(e,t,n){"use strict";var a=n("472a"),r=n.n(a);r.a}}]);
//# sourceMappingURL=chunk-70eea2f6.d009017d.js.map