(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d8283d7"],{"667f":function(t,e,a){},"7ab0":function(t,e,a){"use strict";var n=a("9303"),s=a.n(n);s.a},"8b8a":function(t,e,a){"use strict";var n=a("667f"),s=a.n(n);s.a},9303:function(t,e,a){},e883:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.tableData?a("div",{staticClass:"point"},[a("div",{staticClass:"available-integral"},[a("p",[t._v(t._s(t.$L("可用积分")))]),a("p",[t._v(t._s(t.tableData.points))]),a("router-link",{attrs:{to:{name:"integralList",params:{type:"all",points:"all"}}}},[a("el-button",{attrs:{type:"primary",round:"",size:"small"}},[t._v(t._s(t.$L("积分兑换")))])],1)],1),a("div",{staticClass:"search",class:{active:t.searchType}},[a("div",{staticClass:"search-box"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:t.$L("输入描述"),size:"small",clearable:""},on:{change:t.searchFunc},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("div",{staticClass:"bbx-font bbx-icon-close mainFontColor",on:{click:function(e){return t.showSearch(!1)}}})]),a("div",{staticClass:"search-status"},[a("el-button",{staticClass:"time-search",attrs:{size:"small"},on:{click:t.showTimeFunc}},[t._v(t._s(t.$L("时间筛选")))]),a("el-select",{attrs:{size:"small"},on:{change:t.changeTypeFunc},model:{value:t.messageType,callback:function(e){t.messageType=e},expression:"messageType"}},t._l(t.messageTypelist,(function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})})),1)],1),a("div",{staticClass:"point-content"},[a("div",{staticClass:"table"},[t.tableData&&t.tableData.hasOwnProperty("list")?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content"},[a("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData.list,"default-sort":{prop:"log_id",order:"descending"}},on:{"selection-change":t.handleSelectionChange,"sort-change":t.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"40",align:"left"}}),a("el-table-column",{attrs:{width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"point-info"},[e.row.orderSn?a("p",{staticClass:"font-grey"},[t._v(t._s(e.row.orderSn))]):t._e(),a("p",{staticClass:"point-memo"},[t._v(t._s(t.textType(e.row.type,e.row.point,e.row.desc).textTwo)),a("br")]),a("p",{staticClass:"point-desc"},[t._v(t._s(t.$L("描述"))+"："+t._s(t.textType(e.row.type,e.row.point,e.row.desc).textTwo))]),a("p",{staticClass:"point-timer"},[t._v(t._s(e.row.createTime))])])}}],null,!1,2240796403)}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"point-info-two"},[a("p",{staticClass:"font-green"},[t._v(t._s(e.row.point))])])}}],null,!1,2154574135)})],1),t.tableData.allNum>t.pageSize?a("div",{staticClass:"list-pages"},[a("el-pagination",{attrs:{small:"",background:"","page-size":t.pageSize,layout:"prev, pager, next",total:t.tableData.allNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),a("div",{staticClass:"botton-btn"},[a("div",{staticClass:"left"},[a("el-checkbox",{on:{change:function(e){return t.handleCheckAllChange(t.tableData.list)}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v(t._s(t.$L("全选")))])],1),a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){return t.delMsgFunc()}}},[t._v(t._s(t.$L("删除")))])],1)])],1):t._e()])]),a("transition",{attrs:{name:"fade"}},[t.showTime?a("div",{staticClass:"time"},[a("div",{staticClass:"close",on:{click:t.closeTimeFunc}}),a("div",{staticClass:"date"},[a("calendar"),a("inlineCalendar",{attrs:{mode:"during",yearName:t.$L("年"),monthNames:[t.$L("一月"),t.$L("二月"),t.$L("三月"),t.$L("四月"),t.$L("五月"),t.$L("六月"),t.$L("七月"),t.$L("八月"),t.$L("九月"),t.$L("十月"),t.$L("十一月"),t.$L("十二月")],weekNames:[t.$L(" 周一"),t.$L(" 周二"),t.$L(" 周三"),t.$L(" 周四"),t.$L(" 周五"),t.$L(" 周六"),t.$L(" 周日")],defaultDate:t.defaultDate},on:{change:t.onChange}}),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small"},on:{click:t.closeTimeFunc}},[t._v(t._s(t.$L("取消")))]),a("el-button",{staticClass:"mainBgColor",attrs:{size:"small",type:"primary"},on:{click:t.gotoTime}},[t._v(t._s(t.$L("确认")))])],1)],1)]):t._e()])],1):t._e()},s=[],i=(a("9a33"),a("f548"),a("6d57"),{name:"myPoint",data:function(){return{loading:!0,searchType:!1,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,pointNum:0,disabled:!0,messageTypelist:[{type:"all",name:this.$L("全部积分")},{type:"addPoint",name:this.$L("增积分")},{type:"cutPoint",name:this.$L("减积分")}],messageType:"all",inputValue:"",sortBy:"",tableData:{},dtCreateStart:"",dtCreateEnd:"",pageSize:10,currentPage:1,msgArr:[],checkAll:!1,allSelect:!1,showTime:!1,timeArr:[],defaultDate:[]}},computed:{mobileTopBtn:{get:function(){return this.$store.state.mobileTopBtn},set:function(t){this.$store.commit("setMobileTopBtn",t)}}},beforeRouteUpdate:function(t,e,a){this.setupTopBtn(),this.showSearch(!1),a()},created:function(){this.setupTopBtn(),this.getData()},beforeDestroy:function(){this.mobileTopBtn=null},methods:{textType:function(t,e,a){var n;switch(t){case 100:n={text:this.$L("积分购物"),textTwo:this.$L("积分购物")};break;case 101:n={text:this.$L("签到积分"),textTwo:this.$L("签到积分")+e};break;case 102:n={text:this.$L("会员登录积分"),textTwo:this.$L("会员登录积分")};break;case 104:n={text:this.$L("会员注册"),textTwo:this.$L("会员注册")};break;case 105:n={text:this.$L("关注微信公众号"),textTwo:this.$L("关注微信公众号")};break;case 106:n={text:this.$L("发展下级分销商"),textTwo:this.$L("发展下级分销商")};break;case 107:n={text:this.$L("发展下级会员"),textTwo:this.$L("发展下级会员")};break;case 201:n={text:this.$L("兑换产品"),textTwo:this.$L("积分商城产品兑换")};break;case 202:n={text:this.$L("兑换礼品"),textTwo:this.$L("积分商城礼品兑换")};break;case 203:n={text:this.$L("兑换代金券"),textTwo:this.$L("积分商城优惠劵兑换")};break;case 204:n={text:this.$L("积分抽奖"),textTwo:this.$L("积分商城积分抽奖")};break;case 205:n={text:this.$L("积分抵扣金额"),textTwo:this.$L("积分商城积分抵扣金额")};break;case 103:n={text:this.$L("会员卡获取积分"),textTwo:this.$L("会员卡获取积分")};break;case 108:n={text:this.$L("连续签到获取积分"),textTwo:this.$L("连续签到获取积分")+e};break;case 1:n={text:this.$L("管理员录入积分"),textTwo:this.$L("管理员录入积分")};break;case 3:n={text:this.$L("激活会员卡增加积分"),textTwo:this.$L("激活会员卡增加积分")+e};break;case 5:n={text:this.$L("初始化增加经验积分"),textTwo:this.$L("初始化增加经验积分")};break;case 0:n={text:this.$L("订单编号：没有订单信息"),textTwo:a};break;default:n={text:this.$L("未知状态"),textTwo:this.$L("未知状态")};break}return n},setupTopBtn:function(){var t=this;this.mobileTopBtn=[{icon:"bbx-icon-sousuo",size:"24px",func:function(){t.showSearch(!0)}}]},showSearch:function(t){this.searchType=!!t},showError:function(t,e,a){this.errorType="warning"===a?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=e&&""!==e?e:null,this.loading=!1,this.errorShow=!0},getData:function(){var t=this;t.loading=!0;var e={p:t.currentPage,num:t.pageSize,order:t.sortBy,type:t.messageType,keyword:t.inputValue,dtCreateStart:t.dtCreateStart,dtCreateEnd:t.dtCreateEnd};t.$api("getPointList",e,(function(e){1===e.flag?(t.pointNum=e.data.points,t.tableData=e.data,t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$router.push({name:"home"})}))}))},pointExchangegFunc:function(){this.$router.push({name:"integralShop"})},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},changeTypeFunc:function(t){this.messageType=t,this.getData()},searchFunc:function(t){this.inputValue=t,this.getData()},SearchTimeFunc:function(t){null!==t?(this.dtCreateStart=t[0],this.dtCreateEnd=t[1]):(this.dtCreateStart="",this.dtCreateEnd=""),this.getData()},handleSelectionChange:function(t){t.length>0?this.disabled=!1:this.disabled=!0;var e=[];for(var a in t)e[a]=t[a].id;this.msgArr=e},delMsgFunc:function(t){var e=this;if(t||!Array.isArray(this.msgArr)||0!==this.msgArr.length){var a;a=t||this.msgArr;var n={id:a};e.$confirm(e.$L("此操作将永久删除该积分记录, 是否继续?"),e.$L("提示"),{confirmButtonText:e.$L("确定"),cancelButtonText:e.$L("取消"),type:"warning",center:!0}).then((function(){e.$api("deletePointMsg",n,(function(t){1===t.flag?(e.loading=!1,e.$message({type:"success",message:e.$L("删除成功!")}),e.getData()):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}),(function(t){e.$confirm(e.$L(t.msg),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))})).catch((function(){}))}else e.$confirm(e.$L("您还没有选中积分记录，请勾选会员信息再做此操作"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"warning",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){"cancel"==t&&e.$router.push({name:"pointList"})}))},sortChange:function(t,e,a){this.sortBy=t.prop,this.getData()},handleCheckAllChange:function(t){var e=this;if(t){t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t,!e.allSelect)})),this.allSelect=!this.allSelect;var a=[];if(this.allSelect){for(var n in t)a[n]=t[n].id;this.msgArr=a,this.disabled=!1}else this.msgArr=a,this.disabled=!0}},showTimeFunc:function(){this.showTime=!this.showTime},onChange:function(t){var e=JSON.stringify(t.map((function(t){return t.format("YYYY-MM-DD")})));e=e.replace(/"|\[|\]/g,""),e=e.split(","),this.defaultDate=e,this.dtCreateStart=e[0],this.dtCreateEnd=e[1]?e[1]+" 23:59:59":""},closeTimeFunc:function(){this.showTime=!1,this.defaultDate=[],this.dtCreateStart="",this.dtCreateEnd="",this.getData()},gotoTime:function(){this.showTime=!1,this.getData()}}}),o=i,r=(a("7ab0"),a("8b8a"),a("4023")),c=Object(r["a"])(o,n,s,!1,null,"74a6ce50",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-1d8283d7.80cc4aa2.js.map