(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3534a246"],{"0408":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-pay"},[t.gotoPay?t._e():s("div",{staticClass:"order-main"},[s("div",{staticClass:"order-detail"},[t._m(0),s("div",{staticClass:"r-box"},[s("div",{staticClass:"order-tips"},[s("div",{staticClass:"title"},[t._v(t._s(t.$L("订单编号")+"："+(t.routerData.hasOwnProperty("orderInfo")&&t.routerData.orderInfo.hasOwnProperty("orderSn")?t.routerData.orderInfo.orderSn:""))+"\n                    ")]),s("div",{staticClass:"n"},[t._v(t._s(t.$L("订单已提交，请尽快完成支付")))])]),s("div",{staticClass:"order-list"},[s("ul",[s("li",[t._v(t._s(t.$L("订单金额："))),s("span",{staticStyle:{color:"#FF0000"}},[t._v(t._s(t.routerData.hasOwnProperty("orderInfo")&&t.routerData.orderInfo.hasOwnProperty("orderAmount")?t.routerData.orderInfo.orderAmount:""))])]),s("li",[t._v(t._s(t.$L("配送地址：")+(t.routerData.hasOwnProperty("orderInfo")&&t.routerData.orderInfo.hasOwnProperty("address")&&t.routerData.orderInfo.address?t.routerData.orderInfo.address:""))+"\n                        ")]),s("li",[t._v(t._s(t.$L("联系电话：")+(t.routerData.hasOwnProperty("orderInfo")&&t.routerData.orderInfo.hasOwnProperty("mobile")&&t.routerData.orderInfo.address?t.routerData.orderInfo.mobile:""))+"\n                        ")])])])])]),s("div",{staticClass:"pay-type"},[s("div",{staticClass:"pay-title"},[t._v(t._s(t.$L("选择支付方式")))]),s("div",{staticClass:"pay-box"},[t.routerData.hasOwnProperty("payListArr")?s("ul",{staticClass:"r-pay"},t._l(t.routerData.payListArr,(function(e,a){return s("li",{key:a,staticClass:"li"},[s("el-radio-group",{model:{value:t.payId,callback:function(e){t.payId=e},expression:"payId"}},[s("el-radio",{attrs:{label:e.payid}},[s("img",{staticClass:"img",attrs:{src:e.logo,alt:""}})])],1)],1)})),0):t._e()])]),s("div",{staticClass:"bottom"},[s("el-button",{attrs:{size:"medium"},on:{click:t.closeFunc}},[t._v(t._s(t.$L("关闭")))]),s("el-button",{attrs:{size:"medium"},on:{click:t.orderInfo}},[t._v(t._s(t.$L("查看订单详情")))]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.payOrder}},[t._v(t._s(t.$L("立即支付")))])],1)]),t.gotoPay?s("iframe",{ref:"ifr",staticClass:"windows",style:{height:t.height},attrs:{src:t.payUrl},on:{load:t.onLoad}}):t._e()])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-box"},[s("i",{staticClass:"bbx-font bbx-icon-zhifu1"})])}],i=(s("cc57"),{name:"orderPay",inject:["reload"],props:{height:{type:String,default:""},loading:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}},listener:{type:Object,default:function(){return{}}}},watch:{listener:function(t,e){t&&t.hasOwnProperty("order")&&this.payListen(t.order,t.data)}},data:function(){return{payId:0,routerData:{},gotoPay:!1}},computed:{payUrl:{get:function(){return this.$C("serverUrlAjax")+"/exusers/u_payin_finish.php?order_id="+this.data.orderId+"&pay_id="+this.payId+"&vue=1&lang="+this.$langID()}}},created:function(){this.getData()},methods:{payListen:function(t,e){var s=this;switch(t){case"showError":e.hasOwnProperty("msg")&&this.$alert(e.msg,e.hasOwnProperty("title")?e.title:this.$L("支付失败"),{confirmButtonText:this.$L("确定"),type:"error",showClose:!1}).then((function(){s.closeLoading(),s.gotoPay=!1}));break;case"gotoOrderInfo":this.orderInfo(),e.hasOwnProperty("msg")&&e.msg&&""!==e.msg&&this.$message({message:e.msg,type:"success"});break;case"payInfo":e.hasOwnProperty("info")&&this.$alert(e.info,this.$L("支付提示"),{confirmButtonText:this.$L("确定"),type:"warning",showClose:!1}).then((function(){s.orderInfo()}));break;case"getGiftCard":e.hasOwnProperty("msg")&&e.msg&&""!==e.msg&&0==this.$cookies.isKey("userCardToken")?this.$confirm(e.msg,this.$L("提示"),{confirmButtonText:this.$L("确定"),cancelButtonText:this.$L("不在提示"),type:"warning"}).then((function(){s.$emit("closeDialog"),s.$router.push({name:"userCard"})})).catch((function(t){"cancel"==t&&s.$cookies.set("userCardToken","userCard","3y"),s.$emit("closeDialog"),s.reload()})):(this.$emit("closeDialog"),this.$message({message:this.$L("订单支付成功"),type:"success"}),this.reload());break}},onLoad:function(){this.$refs.ifr.contentWindow.postMessage({msg:"isVue"},this.$C("serverUrlAjax"))},payOrder:function(){0===this.payId?this.$message.error("请选择支付方式"):(this.showLoading(),this.gotoPay=!0)},orderInfo:function(){var t=this;this.closeFunc(),"orderInfo"===this.$route.name&&this.$route.params.id===this.data.orderId?setTimeout((function(){t.reload()}),500):this.$router.push({name:"orderInfo",params:{id:this.data.orderId}})},showLoading:function(){this.$emit("showDialogLoading")},closeLoading:function(){this.$emit("closeDialogLoading")},closeFunc:function(){this.$emit("closeDialog")},getData:function(){var t=this;t.data.hasOwnProperty("orderId")?t.$api("payOrder",{orderId:t.data.orderId},(function(e){1===e.flag?(t.routerData=e.data,console.log("_self.routerData",t.routerData),t.closeLoading()):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("重试"),cancelButtonText:t.$L("关闭"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.closeFunc()}))}),(function(e){t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击"),cancelButtonText:t.$L("关闭"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.closeFunc()}))})):t.$confirm(t.$L("参数有误"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("关闭窗口"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.closeFunc()}))}}}),o=i,n=(s("2201"),s("4023")),c=Object(n["a"])(o,a,r,!1,null,"09cbb896",null);e["a"]=c.exports},2201:function(t,e,s){"use strict";var a=s("47d6"),r=s.n(a);r.a},"304b":function(t,e,s){"use strict";var a=s("3963"),r=s.n(a);r.a},3963:function(t,e,s){},"47d6":function(t,e,s){},"676c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-list"},[t.orderList.length>0?s("div",{staticClass:"list-content"},[t._l(t.orderList,(function(e){return s("div",{staticClass:"list-main"},[s("div",{staticClass:"list-msg"},[s("span",{staticClass:"inner-span"},[t._v(t._s(t.$L("订单编号")+"："+e.sn))]),s("span",{staticClass:"order-time"},[t._v(t._s(t.$L("下单时间")+"："+e.addTime))])]),s("div",{staticClass:"list-head"},[s("div",{staticClass:"item item-two"},[t._v(t._s(t.$L("产品信息")))]),s("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("价格")))]),s("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("实付金额")))]),s("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("订单状态")))]),s("div",{staticClass:"item item-three"},[t._v(t._s(t.$L("操作")))])]),s("div",{staticClass:"list-info"},[s("div",{staticClass:"item item-two",on:{click:function(s){return t.changeOrderType(e,"info")}}},t._l(e.orderGoods,(function(a){return s("div",{staticClass:"info"},[s("div",{staticClass:"list-main-left"},[s("el-image",{staticClass:"goods-img",attrs:{src:a.productPic,fit:"contain"}},[s("div",{attrs:{slot:"error"},slot:"error"},[s("span",{staticClass:"bbx-font bbx-icon-tupianjiazaishibai error-img mainFontColor"})])])],1),s("div",{staticClass:"list-main-right"},[s("p",{staticClass:"list-main-right-item orderInfo mainFontColorHover",on:{click:function(e){return t.gotoGoodsPage(a)}}},[t._v("\n\t\t\t                        "+t._s(a.chrName)),e.mark?s("span",{staticClass:"mainFontColor"},[t._v(" 【"+t._s(e.mark)+"】 ")]):t._e()]),s("p",{staticClass:"list-main-right-item gray",domProps:{innerHTML:t._s(a.goodsSpec)}}),s("p",{staticClass:"list-main-right-item gray"},[t._v("×"+t._s(a.goodsNum))])])])})),0),s("div",{staticClass:"item item-one"},t._l(e.orderGoods,(function(e){return s("div",{staticClass:"price font-price"},[t._v(t._s(e.goodsPrice)),e.hasOwnProperty("sellPrice")?s("br"):t._e(),e.hasOwnProperty("sellPrice")?s("span",{staticClass:"old-price"},[t._v(t._s(e.sellPrice))]):t._e()])})),0),s("div",{staticClass:"item item-one"},[s("div",{staticClass:"price font-red"},[t._v(t._s(e.orderAmount)),s("br"),s("span",{staticClass:"font-grey"},[t._v(t._s(e.payName))])])]),s("div",{staticClass:"item item-one"},[e.thisOrderStatus<0?s("div",{staticClass:"color-info item-one-txt"},[t._v(t._s(t.$L("已关闭"))+"\n\t\t\t            ")]):0===e.thisOrderStatus||1===e.thisOrderStatus?s("div",{staticClass:"color-danger item-one-txt"},[t._v("\n\t\t\t                "+t._s(t.statusFunc(e.payStatus))+"\n\t\t\t            ")]):2===e.thisOrderStatus?s("div",{staticClass:"color-warning item-one-txt"},[t._v("\n\t\t\t                "+t._s(t.$L("待收货"))+"\n\t\t\t            ")]):3===e.thisOrderStatus?s("div",{staticClass:"color-warning item-one-txt"},[t._v("\n\t\t\t                "+t._s(t.$L("退货中"))+"\n\t\t\t            ")]):6===e.thisOrderStatus?s("div",{staticClass:"color-warning item-one-txt"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$L("待发货"))+"\n\t\t\t\t\t\t")]):4===e.thisOrderStatus?s("div",{staticClass:"color-success item-one-txt"},[t._v("\n\t\t\t                "+t._s(t.$L("已退货"))+"\n\t\t\t            ")]):s("div",{staticClass:"color-success item-one-txt"},[t._v("\n\t\t\t                "+t._s(t.$L("已完成"))+"\n\t\t\t            ")])]),s("div",{staticClass:"item item-three"},[0===e.commentsStatus?s("el-button",{staticClass:"item-btn",attrs:{size:"small",type:"primary"},on:{click:function(s){return t.changeOrderType(e,"evaluate")}}},[t._v(t._s(t.$L("去评价")))]):t._e(),e.hasOwnProperty("canRefund")&&1===e.canRefund?s("el-button",{staticClass:"item-btn",attrs:{size:"small"},on:{click:function(s){return t.changeOrderType(e,"refund")}}},[t._v(t._s(t.$L("申请退款")))]):t._e(),(0===e.thisOrderStatus||1===e.thisOrderStatus)&&e.payStatus>=0?s("el-button",{staticClass:"item-btn",attrs:{type:"primary",size:"small"},on:{click:function(s){return t.changeOrderType(e,"pay")}}},[t._v(t._s(t.$L("立即付款")))]):t._e(),2===e.thisOrderStatus?s("el-button",{staticClass:"item-btn",attrs:{type:"primary",size:"small"},on:{click:function(s){return t.changeOrderType(e,"finish")}}},[t._v(t._s(t.$L("确认收货")))]):t._e(),0===e.thisOrderStatus?s("el-button",{staticClass:"item-btn",attrs:{size:"small"},on:{click:function(s){return t.changeOrderType(e,"cancel")}}},[t._v(t._s(t.$L("取消订单")))]):t._e(),e.thisOrderStatus<0||4==e.thisOrderStatus||5==e.thisOrderStatus?s("el-button",{staticClass:"item-btn",attrs:{size:"small"},on:{click:function(s){return t.changeOrderType(e,"del")}}},[t._v(t._s(t.$L("删除订单")))]):t._e(),3===e.thisOrderStatus||4===e.thisOrderStatus?s("el-button",{staticClass:"item-btn",attrs:{size:"small"},on:{click:function(s){return t.changeOrderType(e,"afterSaleInfo")}}},[t._v(t._s(t.$L("售后详情")))]):t._e(),s("el-button",{staticClass:"item-btn",attrs:{type:"text"},on:{click:function(s){return t.changeOrderType(e,"info")}}},[t._v(t._s(t.$L("订单详情"))+">")]),1===e.commentsStatus?s("el-button",{staticClass:"item-btn",attrs:{type:"text"},on:{click:function(s){return t.changeOrderType(e,"evaluateInfo")}}},[t._v(t._s(t.$L("查看评价"))+">")]):t._e()],1)])])})),t.link?s("div",{staticClass:"bottom"},[s("router-link",{staticClass:"mainFontColor",attrs:{to:{name:"orderList",params:{type:t.all}}}},[t._v("\n\t\t\t\t\t"+t._s(t.$L("查看更多"))+"\n\t\t\t\t")])],1):t._e()],2):s("div",{staticClass:"list-no-data"},[t._v("\n            "+t._s(t.$L("暂无数据"))+"\n        ")])])},r=[],i=s("0408"),o={name:"orderList",props:{orderList:{type:Array,default:function(){return[]}},link:{type:String,default:""}},data:function(){return{loading:null}},methods:{statusFunc:function(t){var e=this.$L("待付款");switch(t){case-1:e=this.$L("货到付款");break;case-2:e=this.$L("到店付款");break;case-3:e=this.$L("等待汇款");break}return e},changeOrderType:function(t,e){var s=this;switch(e){case"del":(t.thisOrderStatus<0||4==t.thisOrderStatus||5==t.thisOrderStatus)&&this.$confirm(this.$L("是否确认删除订单？"),this.$L("删除订单"),{confirmButtonText:this.$L("立即删除"),cancelButtonText:this.$L("我再想想"),type:"warning",distinguishCancelAndClose:!0}).then((function(){s.showLoad(!0),s.$api("changeType",{orderId:t.orderId,orderType:"del"},(function(t){s.showLoad(!1),t&&1===t.flag?(s.$message.success(s.$L("操作成功！")),s.reloadData()):(console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")))}),(function(t){console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")),s.showLoad(!1)}))})).catch((function(t){}));break;case"refund":if(t.hasOwnProperty("canRefund")&&1===t.canRefund){this.$router.push({name:"orderService",params:{id:t.orderId}});break}break;case"pay":(0===t.thisOrderStatus||1===t.thisOrderStatus)&&t.payStatus>=0&&this.$store.commit("setDialogObj",{name:this.$L("订单支付"),view:i["a"],width:"900px",loading:!0,data:{orderId:t.orderId}});break;case"cancel":0===t.thisOrderStatus&&this.$confirm(this.$L("确认取消订单吗？"),this.$L("取消订单"),{confirmButtonText:this.$L("立即取消"),cancelButtonText:this.$L("我再想想"),type:"warning",distinguishCancelAndClose:!0}).then((function(){s.showLoad(!0),s.$api("changeType",{orderId:t.orderId,orderType:"cancel"},(function(t){s.showLoad(!1),t&&1===t.flag?(s.$message.success(s.$L("操作成功！")),s.reloadData()):(console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")))}),(function(t){console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")),s.showLoad(!1)}))})).catch((function(t){}));break;case"finish":2===t.thisOrderStatus&&this.$confirm(this.$L("是否确认收货？"),this.$L("确认收货"),{confirmButtonText:this.$L("立即确认"),cancelButtonText:this.$L("我再想想"),type:"warning",distinguishCancelAndClose:!0}).then((function(){s.showLoad(!0),s.$api("changeType",{orderId:t.orderId,orderType:"finish"},(function(t){s.showLoad(!1),t&&1===t.flag?(s.$message.success(s.$L("操作成功！")),s.reloadData()):(console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")))}),(function(t){console.log(t),s.$message.error(s.$L("操作失败！请稍后重试！")),s.showLoad(!1)}))})).catch((function(t){}));break;case"evaluate":0===t.commentsStatus&&this.$router.push({name:"orderComment",params:{id:t.orderId}});break;case"afterSaleInfo":3!==t.thisOrderStatus&&4!==t.thisOrderStatus||this.$router.push({name:"orderServiceInfo",params:{id:t.orderId}});break;case"evaluateInfo":1===t.commentsStatus&&this.$router.push({name:"checkComment",params:{id:t.orderId}});break;case"info":this.$router.push({name:"orderInfo",params:{id:t.orderId}});break}},gotoGoodsPage:function(t){console.log(t)},showLoad:function(t){"undefined"===typeof t||t?this.loading=this.$loading({lock:!0}):this.loading&&(this.loading.close(),this.loading=null)},reloadData:function(){this.$emit("reloadData")}}},n=o,c=(s("fe5c"),s("304b"),s("4023")),d=Object(c["a"])(n,a,r,!1,null,"acdbb5d2",null);e["a"]=d.exports},ba7c:function(t,e,s){},fe5c:function(t,e,s){"use strict";var a=s("ba7c"),r=s.n(a);r.a}}]);
//# sourceMappingURL=chunk-3534a246.bd8372b0.js.map