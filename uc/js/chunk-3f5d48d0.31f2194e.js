(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f5d48d0"],{"004c":function(e,t,r){"use strict";var s=r("94e0"),a=r.n(s);a.a},3882:function(e,t,r){},"8db5":function(e,t,r){e.exports=r.p+"img/addpt.2ab3bc20.jpg"},"94e0":function(e,t,r){},c711:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"issue-information"},[s("div",{staticClass:"issue-content"},[s("el-form",{ref:"addressForm",staticClass:"form-item",attrs:{size:"small",model:e.addressForm,rules:e.addressRules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:e.$L("标题")+"：",prop:"title"}},[s("el-input",{attrs:{placeholder:e.$L(" 最多可添加100个字符"),maxlength:"100"},model:{value:e.addressForm.title,callback:function(t){e.$set(e.addressForm,"title",t)},expression:"addressForm.title"}}),s("span",{staticClass:"font-grey"},[e._v(e._s(e.addressForm.title.length)+"/100")])],1),s("el-form-item",{staticClass:"img-item",attrs:{label:e.$L("缩略图")+"："}},["http://bbx11.nicebox.test"===e.addressForm.img||""===e.addressForm.img?s("img",{staticClass:"up-show",attrs:{src:r("8db5"),border:"0",align:"absmiddle"}}):s("img",{staticClass:"up-show",attrs:{src:e.addressForm.img,border:"0",align:"absmiddle"}}),s("input",{staticClass:"img-input",attrs:{id:"fileinp",type:"file",name:"CommentsPic",placeholder:e.$L("上传图片"),accept:"image/png,image/jpeg,image/jpg"},on:{change:e.upImgFunc}})]),s("el-form-item",{staticClass:"time-item",attrs:{label:e.$L("显示时间")+"："}},[s("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","default-value":"",type:"datetime",placeholder:e.$L("选择日期")},on:{change:e.SearchTimeFunc},model:{value:e.addressForm.dtCreate,callback:function(t){e.$set(e.addressForm,"dtCreate",t)},expression:"addressForm.dtCreate"}}),s("span",{staticClass:"font-grey"},[e._v(e._s(e.$L("显示给他人看的发布时间，默认为当前时间")))])],1),s("el-form-item",{attrs:{label:e.$L("描述")+"：",prop:"des"}},[s("el-input",{attrs:{type:"textarea",maxlength:"500",resize:"none",rows:"4"},model:{value:e.addressForm.summary,callback:function(t){e.$set(e.addressForm,"summary",t)},expression:"addressForm.summary"}}),s("span",{staticClass:"font-grey"},[e._v(e._s(e.addressForm.summary?e.addressForm.summary.length:0)+"/500")])],1),s("el-form-item",{attrs:{label:e.$L("内容")+"：",prop:"content"}},[s("quill-editor",{staticClass:"editor",attrs:{maxlength:"50000",options:e.editorOption},model:{value:e.addressForm.content,callback:function(t){e.$set(e.addressForm,"content",t)},expression:"addressForm.content"}}),s("span",{staticClass:"font-grey"},[e._v(e._s(e.addressForm.content.length-7<0?0:e.addressForm.content.length-7)+"/50000")])],1)],1)],1),s("div",{staticClass:"bottom-btns"},[s("el-button",{on:{click:e.backFunc}},[e._v(e._s(e.$L("返回")))]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveInfoFun}},[e._v(e._s(e.$L("发布")))])],1),e.errorShow?s("div",{staticClass:"error"},[s("el-alert",{staticClass:"error-tips",attrs:{title:e.errorTitle,type:e.errorType,description:e.errorTips,closable:!1,center:!0,"show-icon":""}})],1):e._e()])},a=[],n=r("ee22"),o={name:"issueInformation",components:{SectionTitle:n["a"]},data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,id:0,megInfo:{},editorOption:{},uploadImg:[],addressForm:{title:"",img:"",dtCreate:"",summary:"",content:""},showImgUrl:"",addressRules:{title:[{required:!0,message:"请输入正确的标题"}]}}},beforeRouteUpdate:function(e,t,r){this.getData(e),r()},created:function(){if(this.$route.params.hasOwnProperty("id")){var e=this.$route.params.id;e=parseInt(e),isNaN(e)&&(e=0),this.id=e}this.id>0?this.getData():this.loading=!1,this.addressForm.dtCreate=this.formatDateTime(new Date)},methods:{showError:function(e,t,r){this.errorType="warning"===r?"warning":"error",this.errorTitle=e&&""!==e?e:this.$L("出错了"),this.errorTips=t&&""!==t?t:null,this.loading=!1,this.errorShow=!0},getData:function(e){var t=this;e&&console.log(e),t.id>0&&(t.loading=!0,t.$api("readContentReleaseNews",{id:t.id},(function(e){1===e.flag?(t.megInfo=e.data,t.addressForm.title=t.megInfo.title,t.addressForm.dtCreate=t.megInfo.dtCreate,t.addressForm.summary=t.megInfo.summary,t.addressForm.content=t.megInfo.content,t.addressForm.img=t.megInfo.pic,t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.backFunc()}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.backFunc()}))})))},formatDateTime:function(e){var t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var s=e.getDate();s=s<10?"0"+s:s;var a=e.getHours();a=a<10?"0"+a:a;var n=e.getMinutes();n=n<10?"0"+n:n;var o=e.getSeconds();return o=o<10?"0"+o:o,t+"-"+r+"-"+s+" "+a+":"+n+":"+o},upImgFunc:function(e){var t=this,r=e.target.files[0],s=Math.floor(r.size/1024),a=r.type.substring(6);if(s>2097152)return t.$Message.info("请选择2M以内的图片！"),!1;if("png"!==a&&"jpeg"!==a&&"jpg"!==a)return t.$Message.info("请选择png、jpeg、jpg的图片格式！"),!1;t.uploadImg={file:r};var n=new FileReader;n.readAsDataURL(r),n.onload=function(e){t.addressForm.img=e.target.result}},SearchTimeFunc:function(e){console.log(e),this.addressForm.dtCreate=e},backFunc:function(){this.$router.push({name:"information"})},saveInfoFun:function(){var e=this;if(e.loading=!0,""!==e.addressForm.title){e.addressForm.img=e.uploadImg;var t={id:e.id,title:e.addressForm.title,dtCreate:e.addressForm.dtCreate,summary:e.addressForm.summary,content:e.addressForm.content,smallImg:e.addressForm.img},r=e.$objToFormData(t);e.$api("editReleaseNews",r,(function(t){1===t.flag?(e.$message({type:"success",message:e.$L("发布成功!")}),e.$router.push({name:"information"}),e.getData(),e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.backFunc()}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.backFunc()}))}),!0)}else e.$message({type:"error",message:e.$L("标题不能为空!")}),e.loading=!1}}},i=o,l=(r("f99e"),r("4023")),c=Object(l["a"])(i,s,a,!1,null,"dbf3ab98",null);t["default"]=c.exports},ee22:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.tit?r("div",{staticClass:"section-title"},[e._v("\n    "+e._s(e.tit)+"\n")]):e._e()},a=[],n={name:"sectionTitle",components:{},props:{tit:{type:String,default:""}}},o=n,i=(r("004c"),r("4023")),l=Object(i["a"])(o,s,a,!1,null,"dec42f34",null);t["a"]=l.exports},f99e:function(e,t,r){"use strict";var s=r("3882"),a=r.n(s);a.a}}]);
//# sourceMappingURL=chunk-3f5d48d0.31f2194e.js.map