(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58fa78a1"],{"13e8":function(t,s,e){"use strict";var i=e("62f3"),n=e.n(i);n.a},"625f":function(t,s,e){},"62f3":function(t,s,e){},"7b50":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.safetySetting?e("div",{staticClass:"safety"},[e("div",{staticClass:"safety-info"},[e("div",{staticClass:"safety-logo"},[e("user-avatars",{staticClass:"img",attrs:{src:t.safetySetting.head}})],1),e("div",{staticClass:"safety-text"},[e("p",[e("span",{staticClass:"tit"},[t._v(t._s(t.$L("会员账号"))+"：")]),t._v(t._s(t.safetySetting.username))]),e("p",[e("span",{staticClass:"tit"},[t._v(t._s(t.$L("会员昵称"))+"：")]),t._v(t._s(t.safetySetting.nickname))]),e("p",[e("span",{staticClass:"tit"},[t._v(t._s(t.$L("最近登录时间"))+"：")]),t._v(t._s(t.safetySetting.loginTime))])]),e("router-link",{staticClass:"info-item",attrs:{to:{name:"accountInfo"}}},[e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})])],1),e("div",{staticClass:"safetyLevel"},[e("div",{staticClass:"safety-progress"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$L("安全等级")))]),e("el-progress",{attrs:{color:"#2D8CF0","show-text":!1,"stroke-width":10,percentage:t.safetySetting.percent}}),e("span",{staticClass:"size"},[t._v(t._s(t.gradeFunc(t.safetySetting.grade)))])],1),e("table",{staticClass:"table"},[t.safetySetting.password&&t.safetySetting.password.hasOwnProperty("isset")?e("tr",{staticClass:"tr"},[e("td",{staticClass:"td",attrs:{width:"120px"}},[t._v(t._s(t.$L("登录密码")))]),e("td",{staticClass:"td"},[1===t.safetySetting.password.isset?e("p",{on:{click:t.modifyPwd}},[e("span",{staticClass:"green span"},[t._v(t._s(t.$L("已设置")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):0===t.safetySetting.password.isset?e("p",{on:{click:t.setPwd}},[e("span",{staticClass:"red span"},[t._v(t._s(t.$L("未设置")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):t._e()])]):t._e(),t.safetySetting.hasOwnProperty("email")?e("tr",{staticClass:"tr"},[e("td",{staticClass:"td"},[t._v(t._s(t.$L("邮箱绑定")))]),e("td",{staticClass:"td"},[1===t.safetySetting.email.isset?e("p",{on:{click:t.modifyEmail}},[e("span",{staticClass:"green span"},[t._v(t._s(t.$L("已绑定"))+t._s(t.hidePhone(t.safetySetting.email.emailNum)))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):0===t.safetySetting.email.isset?e("p",{on:{click:t.setEmail}},[e("span",{staticClass:"red span"},[t._v(t._s(t.$L("未绑定")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):t._e()])]):t._e(),t.safetySetting.hasOwnProperty("mobile")?e("tr",{staticClass:"tr"},[e("td",{staticClass:"td"},[t._v(t._s(t.$L("手机绑定")))]),e("td",{staticClass:"td"},[1===t.safetySetting.mobile.isset?e("p",{on:{click:t.modifyPhone}},[e("span",{staticClass:"green span"},[t._v(t._s(t.$L("已绑定"))+t._s(t.hidePhone(t.safetySetting.mobile.mobileNum)))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):0===t.safetySetting.mobile.isset?e("p",{on:{click:t.setPhone}},[e("span",{staticClass:"red span"},[t._v(t._s(t.$L("未绑定")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):t._e()])]):t._e(),t.safetySetting.hasOwnProperty("wx")&&t.safetySetting.wx.hasOwnProperty("isset")?e("tr",{staticClass:"tr"},[e("td",{staticClass:"td"},[t._v(t._s(t.$L("关联微信账号")))]),e("td",{staticClass:"td"},[1===t.safetySetting.wx.isset?e("p",{on:{click:t.unBindWeChat}},[e("span",{staticClass:"green span"},[t._v(t._s(t.$L("已关联")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):0===t.safetySetting.wx.isset?e("p",{on:{click:t.bindWeChat}},[e("span",{staticClass:"red span"},[t._v(t._s(t.$L("未关联")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):t._e()])]):t._e(),t.safetySetting.hasOwnProperty("qq")&&t.safetySetting.qq.hasOwnProperty("isset")?e("tr",{staticClass:"tr"},[e("td",{staticClass:"td"},[t._v(t._s(t.$L("关联QQ账号")))]),e("td",{staticClass:"td"},[1===t.safetySetting.qq.isset?e("p",{on:{click:t.untiedQQ}},[e("span",{staticClass:"green span"},[t._v(t._s(t.$L("已关联")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):0===t.safetySetting.qq.isset?e("p",{on:{click:t.bindQQ}},[e("span",{staticClass:"red span"},[t._v(t._s(t.$L("未关联")))]),e("span",{staticClass:"bbx-font bbx-icon-iconfontjiantou2"})]):t._e()])]):t._e()])])]):t._e()},n=[],a=e("3a11"),o=e("23c1"),c=e("63ac"),r=e("cb4d"),l=e("990d"),f=e("4440"),u={name:"safety",components:{bindEmail:c["a"],bindPassword:o["a"],bindPhone:a["a"],userAvatars:f["a"],bindQQ:r["a"],bindWeChat:l["a"]},data:function(){return{safetySetting:{}}},created:function(){this.getData()},methods:{showError:function(t,s,e){this.errorType="warning"===e?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=s&&""!==s?s:null,this.loading=!1,this.errorShow=!0},getData:function(){var t=this;t.loading=!0,t.$api("safetySetting",{},(function(s){1===s.flag?(t.safetySetting=s.data,t.percentFunc(),t.loading=!1):-1===s.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(s){t.loading=!1,t.showError(t.$L("登录超时"),t.$L("请重新登录"),"error")})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){"cancel"===s?t.$router.push({name:"home"}):(t.loading=!1,t.showError(t.$L("网络请求失败"),t.$L("请刷新页面重试"),"error"))}))}),(function(s){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){"cancel"===s?t.$router.push({name:"home"}):(t.loading=!1,t.showError(t.$L("网络请求失败"),t.$L("请刷新页面重试"),"error"))}))}))},percentFunc:function(){var t=this,s=0,e=0;t.safetySetting.hasOwnProperty("password")&&(e++,1===t.safetySetting.password.isset&&s++),t.safetySetting.hasOwnProperty("email")&&(e++,1===t.safetySetting.email.isset&&s++),t.safetySetting.hasOwnProperty("mobile")&&(e++,1===t.safetySetting.mobile.isset&&s++),t.safetySetting.hasOwnProperty("wx")&&(e++,1===t.safetySetting.wx.isset&&s++),t.safetySetting.hasOwnProperty("qq")&&(e++,1===t.safetySetting.qq.isset&&s++),t.safetySetting.percent=s/e*100},gradeFunc:function(t){return 1===t?this.$L("低"):2===t?this.$L("中"):3===t?this.$L("高"):void 0},hidePhone:function(t){return t.substr(0,3)+"****"+t.substr(7)},modifyPhone:function(){this.$store.commit("setDialogObj",{name:this.$L("修改手机"),view:a["a"],width:"500px",data:{isset:this.safetySetting.mobile.isset,mobileNum:this.safetySetting.mobile.mobileNum,trueMobileNum:this.safetySetting.mobile.trueMobileNum}})},setPhone:function(){this.$store.commit("setDialogObj",{name:this.$L("绑定手机"),view:a["a"],width:"500px",data:{isset:this.safetySetting.mobile.isset,mobileNum:this.safetySetting.mobile.mobileNum,trueMobileNum:this.safetySetting.mobile.trueMobileNum}})},modifyPwd:function(){this.$store.commit("setDialogObj",{name:this.$L("修改密码"),view:o["a"],width:"500px",data:{isset:this.safetySetting.password.isset,phoneSet:this.safetySetting.hasOwnProperty("mobile")&&1===this.safetySetting.mobile.isset?1:0}})},setPwd:function(){this.$store.commit("setDialogObj",{name:this.$L("设置密码"),view:o["a"],width:"500px",data:{isset:this.safetySetting.password.isset}})},modifyEmail:function(){this.$store.commit("setDialogObj",{name:this.$L("修改邮箱"),view:c["a"],width:"500px",data:{isset:this.safetySetting.email.isset,emailNum:this.safetySetting.email.emailNum}})},setEmail:function(){this.$store.commit("setDialogObj",{name:this.$L("绑定邮箱"),view:c["a"],width:"500px",data:{isset:this.safetySetting.email.isset,emailNum:this.safetySetting.email.emailNum}})},bindQQ:function(){this.$store.commit("setDialogObj",{name:this.$L("绑定QQ"),view:r["a"],width:"815px",height:"560px"})},untiedQQ:function(){var t=this;t.$confirm(t.$L("是否解除绑定？"),t.$L("解绑QQ"),{confirmButtonText:t.$L("立即解绑"),cancelButtonText:t.$L("我再想想"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.loading=!0,t.$getApi("untiedQQ",{},(function(s){t.$message({message:t.$L("解绑QQ成功!"),type:"success"}),t.loading=!1,t.getData()}),(function(s){s&&-2==s.flag?t.$alert(t.$L("尚未设置登录密码！无法解绑！"),t.$L("解绑QQ失败!"),{confirmButtonText:t.$L("确定"),type:"error",showClose:!1}).then((function(){t.loading=!1,t.getData()})):t.$confirm(t.$L("解绑QQ失败!"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.untiedQQ()})).catch((function(s){t.loading=!1,t.getData()}))}))})).catch((function(t){}))},bindWeChat:function(){var t=this;this.$store.commit("setDialogObj",{name:this.$L("绑定微信"),view:l["a"],width:"815px",height:"560px",closeFunc:function(){t.getData()}})},unBindWeChat:function(){var t=this;t.$confirm(t.$L("是否解除绑定？"),t.$L("解绑微信"),{confirmButtonText:t.$L("立即解绑"),cancelButtonText:t.$L("我再想想"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.loading=!0,setTimeout((function(){t.$getApi("unBindWeChat",{},(function(s){t.$message({message:t.$L("解绑微信成功!"),type:"success"}),t.loading=!1,t.getData()}),(function(s){s&&-2==s.flag?t.$alert(t.$L("尚未设置登录密码！无法解绑！"),t.$L("解绑微信失败!"),{confirmButtonText:t.$L("确定"),type:"error",showClose:!1}).then((function(){t.loading=!1,t.getData()})):t.$confirm(t.$L("解绑微信失败!"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.unBindWeChat()})).catch((function(s){t.loading=!1,t.getData()}))}))}),500)})).catch((function(t){}))}}},h=u,d=(e("c207"),e("13e8"),e("4023")),g=Object(d["a"])(h,i,n,!1,null,"604414dc",null);s["default"]=g.exports},c207:function(t,s,e){"use strict";var i=e("625f"),n=e.n(i);n.a}}]);
//# sourceMappingURL=chunk-58fa78a1.a51602fb.js.map