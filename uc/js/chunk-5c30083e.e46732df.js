(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c30083e"],{"25ae":function(t,s,e){},eaab:function(t,s,e){"use strict";var a=e("25ae"),i=e.n(a);i.a},fda8:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"service"},[t.orderList?e("div",{staticClass:"service-content"},[e("div",{staticClass:"list-main"},[e("div",{staticClass:"list-msg"},[e("span",{staticClass:"inner-span"},[t._v(t._s(t.$L("订单编号"))+"："+t._s(t.orderList.orderSn))]),e("span",{staticClass:"order-time"},[t._v(t._s(t.$L("下单时间"))+"："+t._s(t.orderList.addTime))])]),e("div",{staticClass:"list-head"},[e("div",{staticClass:"item item-two"},[t._v(t._s(t.$L("产品信息")))]),e("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("价格")))]),e("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("实付金额")))]),e("div",{staticClass:"item item-one"},[t._v(t._s(t.$L("订单状态")))])]),e("div",{staticClass:"list-info"},[e("div",{staticClass:"item item-two"},t._l(t.orderList.getProductInfo,(function(s,a){return e("div",{key:a,staticClass:"info"},[e("div",{staticClass:"list-main-left"},[e("img",{attrs:{src:s.smallImg,alt:""}})]),e("div",{staticClass:"list-main-right"},[e("p",{staticClass:"orderInfo"},[t._v(t._s(s.chrName))]),e("p",{staticClass:"gray",domProps:{innerHTML:t._s(s.goodsSpec)}}),e("p",{staticClass:"gray"},[t._v("×"+t._s(s.goodsNumber))])])])})),0),e("div",{staticClass:"item item-one"},t._l(t.orderList.getProductInfo,(function(s,a){return e("div",{key:a,staticClass:"price"},[t._v("\n                        ￥"+t._s(s.goodsPrice)),e("br"),s.oldPrice-s.goodsPrice>0?e("span",[t._v(t._s(s.oldPrice))]):t._e()])})),0),e("div",{staticClass:"item item-one"},[e("p",{staticClass:"red"},[t._v("￥"+t._s(t.orderList.orderAmount))]),e("p",{staticClass:"gray"},[t._v(t._s(t.orderList.payName))])]),e("div",{staticClass:"item item-one"},[e("div",{staticClass:"unconfirm"},[t._v("\n                        "+t._s(t.$L("订单已完成"))+"\n                    ")])])])]),e("el-form",{staticClass:"service-reason"},[e("p",{staticClass:"return"},[e("span",{staticClass:"black"},[t._v(t._s(t.$L("可退金额"))+"：")]),e("span",{staticClass:"red"},[t._v("￥"+t._s(t.orderList.orderAmount))])]),e("p",{staticClass:"warn gray"},[t._v(t._s(t.$L("*该产品仅退回产品金额，已使用的积分,优惠券和快递费用将不予退还")))]),e("p",{staticClass:"reason"},[t._v(t._s(t.$L("退货/退款原因")))]),e("el-input",{staticClass:"remarks",attrs:{maxlength:"500",rows:7,type:"textarea",resize:"none",placeholder:t.$L("请输入原因")},model:{value:t.remarks,callback:function(s){t.remarks=s},expression:"remarks"}}),e("el-form-item",{staticClass:"img-item"}),e("ul",{staticClass:"reason_img"},[t._l(t.showImgArr,(function(s,a){return e("li",{key:a,staticClass:"load-img"},[e("div",{staticClass:"upload-list-cover"},[e("span",{staticClass:"bbx-font bbx-icon-shanchu",on:{click:function(s){return t.handleRemove(a)}}})]),e("img",{staticClass:"img",attrs:{src:s}})])})),t.showImgArr.length<t.maxNum?e("li",{staticClass:"load-img up-load-img"},[e("span",{staticClass:"bbx-font bbx-icon-jiahao"}),e("input",{staticClass:"upload",attrs:{type:"file",name:"CommentsPic",multiple:"",accept:"image/png,image/jpeg,image/jpg"},on:{change:t.upImgFunc}})]):t._e()],2),e("p",{staticClass:"size"},[t._v("*"+t._s(t.$L("图片大于2M将无法上传")))]),e("div",{staticClass:"btns"},[e("el-button",{on:{click:t.backFunc}},[t._v(t._s(t.$L("返回")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitFunc}},[t._v(t._s(t.$L("申请提交")))])],1)],1)],1):t._e()])},i=[],r=(e("163d"),e("4f54")),n={name:"orderService",data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,remarks:"",showImgArr:[],maxNum:4,uploadList:[],uploadImgArr:[],orderList:{},imgList:[]}},created:function(){this.getData()},methods:{showError:function(t,s,e){this.errorType="warning"===e?"warning":"error",this.errorTitle=t&&""!==t?t:this.$L("出错了"),this.errorTips=s&&""!==s?s:null,this.loading=!1,this.errorShow=!0},backFunc:function(){this.$router.push({name:"orderList",params:{type:"all"}})},getData:function(){var t=this;t.loading=!0;var s=t.$route.params.id;t.$api("applyRefund",{orderId:s},(function(s){1===s.flag?(t.orderList=s.data,t.loading=!1):-1===s.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(s){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){t.$router.push({name:"orderList",params:{type:"all"}})}))}),(function(s){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){t.$router.push({name:"orderList",params:{type:"all"}})}))}))},submitFunc:function(){var t=this;if(t.loading=!0,""!==t.remarks){var s=t.orderList.orderId;t.imgList[s]={fileList:t.uploadList};var e={orderId:s,refundResult:t.remarks,choose_img:{fileList:t.imgList}};4==t.orderList.orderStatus&&(e.againRefund=1,e.refundId=t.orderList.refundId);var a=t.$objToFormData(e);t.$api("addApplyRefund",a,(function(e){1===e.flag?(t.getData(),t.$message({type:"success",message:t.$L("提交成功!")}),t.$router.push({name:"orderServiceInfo",parmars:{orderId:s}}),t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(s){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){t.$router.push({name:"orderList",params:{type:"all"}})}))}),(function(s){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(s){t.$router.push({name:"orderList",params:{type:"all"}})}))}),!0)}else t.$message({type:"error",message:t.$L("请填写退款申请原因!")}),t.loading=!1},upImgFunc:function(t){var s=this,e=t.target.files,a=s.uploadLen,i=e.length+a;if(i<s.maxNum&&s.$message({showClose:!0,message:"最多可上传"+s.maxNum+"张，您还可以上传"+(s.maxNum-i)+"张",type:"success"}),e.length<=s.maxNum)for(var n=function(t){var a=null,i=Math.floor(e[t].size/1024),r=e[t].type.substring(6);if(i>2097152)return s.$Message({showClose:!0,message:"请选择2M以内的图片！",type:"warning"}),{v:!1};if("png"!==r&&"jpeg"!==r&&"jpg"!==r)return s.$Message({showClose:!0,message:"请选择png、jpeg、jpg的图片格式！",type:"warning"}),{v:!1};s.uploadList.push({file:e[t]}),s.uploadLen++;var n=new FileReader;n.readAsDataURL(e[t]),Number(s.showImgArr.length+e.length)<=s.maxNum?n.onload=function(t){a=t.target.result,s.showImgArr.push(a)}:s.showImgArr.length<=s.maxNum&&s.$message({showClose:!0,message:"最多可上传"+s.maxNum+"张",type:"success"})},o=0;o<e.length;o++){var c=n(o);if("object"===Object(r["a"])(c))return c.v}else s.$message({showClose:!0,message:"最多可上传"+s.maxNum+"张!",type:"success"})},handleRemove:function(t){this.uploadList.splice(t,1),this.showImgArr.splice(t,1),this.uploadLen=this.showImgArr.length}}},o=n,c=(e("eaab"),e("4023")),l=Object(c["a"])(o,a,i,!1,null,"441f4f44",null);s["default"]=l.exports}}]);
//# sourceMappingURL=chunk-5c30083e.e46732df.js.map