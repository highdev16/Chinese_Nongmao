(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb24af1"],{2211:function(e,t,a){"use strict";var s=a("9551"),n=a.n(s);n.a},"31b6":function(e,t,a){"use strict";var s=a("c2ac"),n=a.n(s);n.a},"43d3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-address"},[a("el-form",{ref:"addressForm",staticClass:"address-form",attrs:{model:e.addressForm,rules:e.addressRules,size:"mini","label-width":"100px","label-position":"left"}},["lang_0"==e.$lang()?a("el-form-item",{attrs:{label:e.$L("智能地址识别")}},[a("el-input",{attrs:{size:"mini",type:"textarea",placeholder:"例如：宝小哥，13200000000，广东省珠海市香洲区某某街道某某大厦001号，519000"},model:{value:e.addressMsg,callback:function(t){e.addressMsg=t},expression:"addressMsg"}}),a("div",{staticClass:"el-form-item-tip"},[a("p",{staticClass:"el-form-item-tip-txt"},[e._v(e._s(e.$L("粘贴整段地址，请用逗号或空格分隔，"))),a("br"),e._v(e._s(e.$L("自动识别姓名、电话和地址")))]),a("p",{staticClass:"el-form-item-tip-btn"},[a("el-button",{staticClass:"button",on:{click:e.getMsg}},[e._v("\n\t            \t\t\t"+e._s(e.$L("智能识别"))+"\n\t            \t\t")])],1)])],1):e._e(),a("el-form-item",{attrs:{label:e.$L("收货人"),prop:"name"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.name,callback:function(t){e.$set(e.addressForm,"name",t)},expression:"addressForm.name"}})],1),a("el-form-item",{attrs:{label:e.$L("手机号码"),prop:"mobile"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.mobile,callback:function(t){e.$set(e.addressForm,"mobile",t)},expression:"addressForm.mobile"}})],1),a("el-form-item",{staticClass:"address",attrs:{label:e.$L("所在地区"),prop:"regions"}},[a("region-view",{ref:"regions",staticStyle:{width:"310px"},attrs:{size:"mini",placeholder:e.defaultCity},model:{value:e.addressForm.regions,callback:function(t){e.$set(e.addressForm,"regions",t)},expression:"addressForm.regions"}})],1),a("el-form-item",{attrs:{label:e.$L("详细地址"),prop:"address"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1),a("el-form-item",{attrs:{label:e.$L("邮政编码"),prop:"recCode"}},[a("el-input",{attrs:{size:"mini"},model:{value:e.addressForm.recCode,callback:function(t){e.$set(e.addressForm,"recCode",t)},expression:"addressForm.recCode"}})],1),a("el-form-item",{attrs:{label:e.$L("设为默认")}},[a("el-switch",{attrs:{size:"mini",width:e.switchWidth},model:{value:e.addressForm.defaultAddress,callback:function(t){e.$set(e.addressForm,"defaultAddress",t)},expression:"addressForm.defaultAddress"}})],1),a("el-form-item",{staticClass:"bottom-btns"},[a("el-button",{staticClass:"button",attrs:{type:"default"},on:{click:e.close}},[e._v(e._s(e.$L("取消")))]),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$L("保存")))])],1)],1)],1)},n=[],r=(a("cc57"),a("4f54")),i=a("bd18"),o={name:"addAddress",inject:["reload"],components:{RegionView:i["a"]},data:function(){var e=this;return{loading:!0,switchWidth:50,defaultCity:"",addressForm:{name:"",mobile:"",address:"",defaultAddress:!0,regions:[],recCode:""},addressRules:{name:[{required:!0,message:this.$L("请输入收货人姓名")}],mobile:[{required:!0,validator:function(t,a,s){if(a=parseInt(a),isNaN(a))s(new Error(e.$L("请输入正确的手机号码或固定电话")));else{var n=/^((1[3456789]\d{9})|(\d{6,16}))$/;if(!n.test(a))return s(new Error(e.$L("手机号码或固定电话有误")));s()}}}],address:[{required:!0,message:this.$L("请输入详细地址")}],regions:[{required:!0,message:this.$L("请选择所在地区"),validator:function(t,a,s){"object"!==Object(r["a"])(a)||a.length<1?s(new Error(e.$L("请选择所在地区"))):s()}}]},addressMsg:""}},props:{data:{type:Object,default:function(){return{}}}},created:function(){this.getData()},methods:{getMsg:function(){var e=this;""!=this.addressMsg&&e.$getApi("getAddressByStr",{address:this.addressMsg},(function(t){var a=[t.name,t.mobile,t.address,t.regions,t.recCode,t.regionsName];e.addressForm.name=a[0],e.addressForm.mobile=a[1],e.addressForm.address=a[2],e.addressForm.regions=a[3],e.addressForm.recCode=a[4],e.defaultCity=a[5]}),(function(t){console.info(e.$L("识别有误，请检查填写格式是否正确。"))}))},save:function(){var e=this;this.$refs.addressForm.validate((function(t){if(!t)return!1;e.close();var a=e,s={idRec:a.data.id,recName:a.addressForm.name,regions:a.addressForm.regions,recAddress:a.addressForm.address,recMobile:a.addressForm.mobile,recCode:a.addressForm.recCode,isDefault:1==a.addressForm.defaultAddress?1:0,lang:""};a.$api("editAddress",s,(function(e){1===e.flag?(a.reload(),a.loading=!1):-1===e.flag?a.$confirm(a.$L("请重新登录"),a.$L("登录超时"),{confirmButtonText:a.$L("重新登录"),cancelButtonText:a.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.$router.push({name:"login",query:{redirect:a.$route.fullPath}})})).catch((function(e){a.$gotoWebHome()})):a.$confirm(a.$L("数据加载失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.getData()})).catch((function(e){a.$router.push({name:"addressList"})}))}),(function(e){a.$confirm(a.$L("网络请求失败"),a.$L("出错了"),{confirmButtonText:a.$L("点击重试"),cancelButtonText:a.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){a.getData()})).catch((function(e){a.$router.push({name:"addressList"})}))}))}))},close:function(){this.$emit("closeDialog")},getData:function(){var e=this;e.loading=!0,e.data&&e.data.hasOwnProperty("id")?e.$api("getAddressInfo",{idRec:e.data.id},(function(t){1===t.flag?(e.addressForm.name=t.data.name,e.addressForm.mobile=t.data.mobile,e.addressForm.defaultAddress=1===t.data.isDefault,e.addressForm.address=t.data.address,e.addressForm.recCode=t.data.recCode,e.defaultCity=t.data.regionsName,e.addressForm.regions=[1,7,247,3021],e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"addressList"})}))})):e.loading=!1}}},d=o,c=(a("2211"),a("4023")),l=Object(c["a"])(d,s,n,!1,null,"6f9e6593",null);t["a"]=l.exports},"4e2a":function(e,t,a){"use strict";var s=a("c2be"),n=a.n(s);n.a},9551:function(e,t,a){},bd18:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-cascader",{staticClass:"region",attrs:{props:e.config,separator:e.separator,placeholder:e.placeholder,size:e.size},model:{value:e.regions,callback:function(t){e.regions=t},expression:"regions"}})},n=[],r=(a("cc57"),{name:"regionView",props:{size:{type:String,default:"small"},separator:{type:String,default:" - "},value:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""}},model:{prop:"value",event:"change"},computed:{regions:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},data:function(){var e=this;return{config:{lazy:!0,lazyLoad:function(t,a){var s=0;t&&(s=t.value),e.getRegion(s,(function(t){var s=[];for(var n in t)t[n]&&s.push({value:t[n].id,label:"lang_0"===e.$lang()||"lang_1"===e.$lang()?t[n].name:t[n].name_en});a(s)}),(function(e){console.log(e),a([])}))}}}},methods:{getRegion:function(e,t,a){var s=this;s.$api("getRegion",{pid:e},(function(e){1===e.flag?"function"===typeof t&&t(e.data):"function"===typeof a&&a(e)}),(function(e){"function"===typeof a&&a(e)}))}}}),i=r,o=(a("4e2a"),a("4023")),d=Object(o["a"])(i,s,n,!1,null,null,null);t["a"]=d.exports},c2ac:function(e,t,a){},c2be:function(e,t,a){},e1c9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"address-list"},[e.tableData&&e.tableData.hasOwnProperty("list")&&e.tableData.list.length>0?a("div",[e._l(e.tableData.list,(function(t){return a("div",{key:t.index},[a("div",{staticClass:"addressList"},[a("div",{staticClass:"address-person-info"},[a("div",[e._v(e._s(t.name))]),a("div",[e._v(e._s(t.mobile))])]),a("div",{staticClass:"address-detail"},[a("div",{staticClass:"left-item"},[e._v(e._s(t.regionsName)+e._s(t.address))])]),a("div",{staticClass:"address-detail"},[a("div",{staticClass:"left-item"},[e._v(e._s(e.$L("邮政编码"))+":"+e._s(t.recCode))])]),a("div",{staticClass:"address-default"},[a("div",{staticClass:"left"},[1===t.isDefault?a("el-radio",{attrs:{label:"1"},model:{value:1==t.isDefault?"1":"0",callback:function(a){e.$set(t,"isDefault == 1 ? '1': '0'",a)},expression:"item.isDefault == 1 ? '1': '0'"}},[e._v(e._s(e.$L("默认地址")))]):a("el-radio",{attrs:{label:"0"},on:{change:function(a){return e.setDefaultFunc(t.id)}},model:{value:0==t.isDefault?"1":"0",callback:function(a){e.$set(t,"isDefault == 0 ? '1': '0'",a)},expression:"item.isDefault == 0 ? '1': '0'"}},[e._v(e._s(e.$L("设为默认")))])],1),a("div",{staticClass:"right"},[a("span",{on:{click:function(a){return e.addAddressFunc(t.id)}}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("\n                          "+e._s(e.$L("编辑"))+"\n                        ")]),a("span",{on:{click:function(a){return e.delMsgFunc(t.id)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("\n                          "+e._s(e.$L("删除"))+"\n                        ")])])])])])})),null!==e.tableData.list&&e.tableData.allNum>0&&e.tableData.allNum>e.pageSize?a("div",{staticClass:"list-pages"},[a("el-pagination",{attrs:{background:"",small:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next",total:e.tableData.allNum},on:{"current-change":e.handleCurrentChange}})],1):e._e()],2):a("div",{staticClass:"no-data"},[e._v("\n        "+e._s(e.$L("暂无数据"))+"\n    ")]),a("div",{staticClass:"add-newAdd"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addAddressFunc()}}},[e._v(e._s(e.$L("添加新地址")))])],1)])},n=[],r=a("43d3"),i={name:"addressList",components:{addAddress:r["a"]},data:function(){return{loading:!0,errorType:"error",errorTitle:this.$L("出错了"),errorTips:null,errorShow:!1,addressNum:6,allAddressNum:20,inputValue:"",tableData:{},pageSize:10,currentPage:1,addressArr:[],addressId:0}},created:function(){this.getData()},methods:{showError:function(e,t,a){this.errorType="warning"===a?"warning":"error",this.errorTitle=e&&""!==e?e:this.$L("出错了"),this.errorTips=t&&""!==t?t:null,this.loading=!1,this.errorShow=!0},getData:function(){var e=this;e.loading=!0;var t={p:e.currentPage,num:e.pageSize,keyword:e.inputValue};e.$api("getAddressList",t,(function(t){1===t.flag?(e.tableData=t.data,e.loading=!1):-1===t.flag?e.$confirm(e.$L("请重新登录"),e.$L("登录超时"),{confirmButtonText:e.$L("重新登录"),cancelButtonText:e.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.$router.push({name:"login",query:{redirect:e.$route.fullPath}})})).catch((function(t){e.$gotoWebHome()})):e.$confirm(e.$L("数据加载失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}),(function(t){e.$confirm(e.$L("网络请求失败"),e.$L("出错了"),{confirmButtonText:e.$L("点击重试"),cancelButtonText:e.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){e.getData()})).catch((function(t){e.$router.push({name:"home"})}))}))},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},searchFunc:function(e){this.inputValue=e,this.getData()},handleSelectionChange:function(e){var t=[];for(var a in e)t[a]=e[a].id;this.addressArr=t,console.log(this.addressArr)},delMsgFunc:function(e){var t=this;if(e||!Array.isArray(this.msgArr)||0!==this.msgArr.length){var a;a=e||this.addressArr;var s={idRec:a};t.$confirm(t.$L("此操作将永久删除该地址信息, 是否继续?"),t.$L("提示"),{confirmButtonText:t.$L("确定"),cancelButtonText:t.$L("取消"),type:"warning"}).then((function(){t.$api("deleteAddress",s,(function(e){1===e.flag?(t.loading=!1,t.$message({type:"success",message:t.$L("删除成功!")}),t.getData()):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):(console.log(e),t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$gotoWebHome()})))}),(function(e){console.log(e),t.$confirm(t.$L(e.msg),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$gotoWebHome()}))}))})).catch((function(){}))}else t.$confirm(t.$L("您还没有选中地址信息，请勾选地址再做此操作"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"warning",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$gotoWebHome()}))},setDefaultFunc:function(e){var t=this;t.addressId=e,t.loading=!0,null!==e&&t.$api("setDefaultAddress",{idRec:t.addressId},(function(e){1===e.flag?(t.$message({type:"success",message:t.$L("设置默认地址成功!")}),t.getData(),t.loading=!1):-1===e.flag?t.$confirm(t.$L("请重新登录"),t.$L("登录超时"),{confirmButtonText:t.$L("重新登录"),cancelButtonText:t.$L("取消"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.$router.push({name:"login",query:{redirect:t.$route.fullPath}})})).catch((function(e){t.$gotoWebHome()})):t.$confirm(t.$L("数据加载失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$gotoWebHome()}))}),(function(e){t.$confirm(t.$L("网络请求失败"),t.$L("出错了"),{confirmButtonText:t.$L("点击重试"),cancelButtonText:t.$L("返回首页"),type:"error",distinguishCancelAndClose:!0}).then((function(){t.getData()})).catch((function(e){t.$gotoWebHome()}))}))},addAddressFunc:function(e){e?this.$router.push({name:"addAddress",params:{id:e}}):this.tableData.allNum<20?this.$router.push({name:"addAddress"}):this.$message({type:"error",message:this.$L("最多可添加20条地址信息!")})}}},o=i,d=(a("eafe"),a("31b6"),a("4023")),c=Object(d["a"])(o,s,n,!1,null,"be502f30",null);t["default"]=c.exports},eafe:function(e,t,a){"use strict";var s=a("f794"),n=a.n(s);n.a},f794:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4fb24af1.ca4dc5cf.js.map